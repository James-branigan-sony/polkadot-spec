<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-chap-host-api">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v0.0.0-5547">
<title data-rh="true">Appendix B: Host API | Polkadot Protocol Specification</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://spec.polkadot.network/chap-host-api"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Appendix B: Host API | Polkadot Protocol Specification"><meta data-rh="true" name="description" content="Description of the expected environment available for import by the Polkadot Runtime"><meta data-rh="true" property="og:description" content="Description of the expected environment available for import by the Polkadot Runtime"><link data-rh="true" rel="icon" href="/img/polkadot-logo.png"><link data-rh="true" rel="canonical" href="https://spec.polkadot.network/chap-host-api"><link data-rh="true" rel="alternate" href="https://spec.polkadot.network/chap-host-api" hreflang="en"><link data-rh="true" rel="alternate" href="https://spec.polkadot.network/chap-host-api" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://59CYO0AR6V-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css"><link rel="stylesheet" href="/assets/css/styles.e5183a90.css">
<script src="/assets/js/runtime~main.6f1f5099.js" defer="defer"></script>
<script src="/assets/js/main.b77e0a44.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Polkadot_Logo_Horizontal_Pink-Black.svg" alt="Polkadot Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Polkadot_Logo_Horizontal_Pink-Black.svg" alt="Polkadot Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/part-polkadot-host">Host</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/part-polkadot-runtime">Runtime</a><a href="https://github.com/w3f/polkadot-spec" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/id-polkadot-protocol">Protocol</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/part-polkadot-host">Host</a><button aria-label="Toggle the collapsible sidebar category &#x27;Host&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chap-overview">1. Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chap-state">2. States and Transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chap-sync">3. Synchronization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chap-networking">4. Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sect-block-production">5. Block Production</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sect-finality">6. Finality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sect-lightclient">7. Light Clients</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chapter-anv">8. Availability &amp; Validity</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/part-polkadot-runtime">Runtime</a><button aria-label="Toggle the collapsible sidebar category &#x27;Runtime&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/id-extrinsics">9. Extrinsics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/id-weights">10. Weights</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/id-consensus">11. Consensus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sect-metadata">12. Metadata</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/Implementation Guide">Implementation Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Implementation Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Implementation Guide/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/id-cryptography-encoding">Appendix A: Cryptography &amp; Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/chap-host-api">Appendix B: Host API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chap-runtime-api">Appendix C: Runtime API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/id-glossary">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Appendix B: Host API</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Appendix B: Host API</h1></header><p>Description of the expected environment available for import by the Polkadot Runtime</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="id-preliminaries-4">B.1. Preliminaries<a href="#id-preliminaries-4" class="hash-link" aria-label="Direct link to B.1. Preliminaries" title="Direct link to B.1. Preliminaries">​</a></h2><p>The Polkadot Host API is a set of functions that the Polkadot Host exposes to Runtime to access external functions needed for various reasons, such as the Storage of the content, access and manipulation, memory allocation, and also efficiency. The encoding of each data type is specified or referenced in this section. If the encoding is not mentioned, then the default Wasm encoding is used, such as little-endian byte ordering for integers.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-host-api-at-state">Definition 214. Exposed Host API<a href="#defn-host-api-at-state" class="hash-link" aria-label="Direct link to Definition 214. Exposed Host API" title="Direct link to Definition 214. Exposed Host API">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>By <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>RE</mtext><mi>B</mi></msub></mrow><annotation encoding="application/x-tex">\text{RE}_{{B}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord text"><span class="mord">RE</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> we refer to the API exposed by the Polkadot Host, which interacts, manipulates, and responds based on the state storage whose state is set at the end of the execution of block <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span></span></span>.</p></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-runtime-pointer">Definition 215. Runtime Pointer<a href="#defn-runtime-pointer" class="hash-link" aria-label="Direct link to Definition 215. Runtime Pointer" title="Direct link to Definition 215. Runtime Pointer">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>The <strong>Runtime pointer</strong> type is an unsigned 32-bit integer representing a pointer to data in memory. This pointer is the primary way to exchange data of fixed/known size between the Runtime and Polkadot Host.</p></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-runtime-pointer-size">Definition 216. Runtime Pointer Size<a href="#defn-runtime-pointer-size" class="hash-link" aria-label="Direct link to Definition 216. Runtime Pointer Size" title="Direct link to Definition 216. Runtime Pointer Size">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>The <strong>Runtime pointer-size</strong> type is an unsigned 64-bit integer representing two consecutive integers. The least significant is <strong>Runtime pointer</strong> (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>). The most significant provides the size of the data in bytes. This representation is the primary way to exchange data of arbitrary/dynamic sizes between the Runtime and the Polkadot Host.</p></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-lexicographic-ordering">Definition 217. Lexicographic ordering<a href="#defn-lexicographic-ordering" class="hash-link" aria-label="Direct link to Definition 217. Lexicographic ordering" title="Direct link to Definition 217. Lexicographic ordering">​</a></h6><div class="alert alert--definition"><h5></h5><div><p><strong>Lexicographic ordering</strong> refers to the ascending ordering of bytes or byte arrays, such as:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mo fence="true">[</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>2</mn><mo fence="true">]</mo></mrow><mo>&lt;</mo><mrow><mo fence="true">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo fence="true">]</mo></mrow><mo>&lt;</mo><mrow><mo fence="true">[</mo><mn>1</mn><mo fence="true">]</mo></mrow><mo>&lt;</mo><mrow><mo fence="true">[</mo><mn>1</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo fence="true">]</mo></mrow><mo>&lt;</mo><mrow><mo fence="true">[</mo><mn>2</mn><mo fence="true">]</mo></mrow><mo>&lt;</mo><mrow><mo fence="true">[</mo><mo>…</mo><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">{\left[{0},{0},{2}\right]}&lt;{\left[{0},{1},{1}\right]}&lt;{\left[{1}\right]}&lt;{\left[{1},{1},{0}\right]}&lt;{\left[{2}\right]}&lt;{\left[\ldots\right]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">[</span><span class="mord"><span class="mord">0</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord">0</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord">2</span></span><span class="mclose delimcenter" style="top:0em">]</span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">[</span><span class="mord"><span class="mord">0</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord">1</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord">1</span></span><span class="mclose delimcenter" style="top:0em">]</span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">[</span><span class="mord"><span class="mord">1</span></span><span class="mclose delimcenter" style="top:0em">]</span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">[</span><span class="mord"><span class="mord">1</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord">1</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord">0</span></span><span class="mclose delimcenter" style="top:0em">]</span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">[</span><span class="mord"><span class="mord">2</span></span><span class="mclose delimcenter" style="top:0em">]</span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">[</span><span class="minner">…</span><span class="mclose delimcenter" style="top:0em">]</span></span></span></span></span></span></span></div><p>The functions are specified in each subsequent subsection for each category of those functions.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-storage-api">B.2. Storage<a href="#sect-storage-api" class="hash-link" aria-label="Direct link to B.2. Storage" title="Direct link to B.2. Storage">​</a></h2><p>Interface for accessing the storage from within the runtime.</p><div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>danger</div><div class="admonitionContent_BuS1"><p>As of now, the storage API should silently ignore any keys that start with the <code>:child_storage:default:</code> prefix. This applies to reading and writing. If the function expects a return value, then <em>None</em> (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) should be returned. See <a href="https://github.com/paritytech/substrate/issues/12461" target="_blank" rel="noopener noreferrer">substrate issue <!-- -->#<!-- -->12461</a>.</p></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-state-version">Definition 218. State Version<a href="#defn-state-version" class="hash-link" aria-label="Direct link to Definition 218. State Version" title="Direct link to Definition 218. State Version">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>The state version, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span></span></span></span></span>, dictates how a Merkle root should be constructed. The data structure is a varying type of the following format:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>v</mi><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>full values</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>node hashes</mtext></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">{v}={\left\lbrace\begin{matrix}{0}&amp;\text{full values}\\{1}&amp;\text{node hashes}\end{matrix}\right.}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">0</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">full values</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">node hashes</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div><p>where <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord"><span class="mord">0</span></span></span></span></span></span> indicates that the values of the keys should be inserted into the trie directly, and <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord"><span class="mord">1</span></span></span></span></span></span> makes use of &quot;node hashes&quot; when calculating the Merkle proof (<a href="/chap-state#defn-hashed-subvalue">Definition 28</a>).</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-storage-set">B.2.1. <code>ext_storage_set</code><a href="#sect-storage-set" class="hash-link" aria-label="Direct link to sect-storage-set" title="Direct link to sect-storage-set">​</a></h3><p>Sets the value under a given key into storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype">B.2.1.1. Version 1 - Prototype<a href="#id-version-1-prototype" class="hash-link" aria-label="Direct link to B.2.1.1. Version 1 - Prototype" title="Direct link to B.2.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_set_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (param $value i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the value.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_storage_get">B.2.2. <code>ext_storage_get</code><a href="#id-ext_storage_get" class="hash-link" aria-label="Direct link to id-ext_storage_get" title="Direct link to id-ext_storage_get">​</a></h3><p>Retrieves the value associated with the given key from storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-2">B.2.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-2" class="hash-link" aria-label="Direct link to B.2.2.1. Version 1 - Prototype" title="Direct link to B.2.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_get_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the key.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) returning the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the value.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_storage_read">B.2.3. <code>ext_storage_read</code><a href="#id-ext_storage_read" class="hash-link" aria-label="Direct link to id-ext_storage_read" title="Direct link to id-ext_storage_read">​</a></h3><p>Gets the given key from storage, placing the value into a buffer and returning the number of bytes that the entry in storage has beyond the offset.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-3">B.2.3.1. Version 1 - Prototype<a href="#id-version-1-prototype-3" class="hash-link" aria-label="Direct link to B.2.3.1. Version 1 - Prototype" title="Direct link to B.2.3.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_read_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (param $value_out i64) (param $offset i32) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the key.</p></li><li><p><code>value_out</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the buffer to which the value will be written to. This function will never write more then the length of the buffer, even if the value’s length is bigger.</p></li><li><p><code>offset</code>: an u32 integer (typed as i32 due to wasm types) containing the offset beyond the value should be read from.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) pointing to a SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing an unsigned 32-bit integer representing the number of bytes left at supplied <code>offset</code>. Returns <em>None</em> if the entry does not exist.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_storage_clear">B.2.4. <code>ext_storage_clear</code><a href="#id-ext_storage_clear" class="hash-link" aria-label="Direct link to id-ext_storage_clear" title="Direct link to id-ext_storage_clear">​</a></h3><p>Clears the storage of the given key and its value. Non-existent entries are silently ignored.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-4">B.2.4.1. Version 1 - Prototype<a href="#id-version-1-prototype-4" class="hash-link" aria-label="Direct link to B.2.4.1. Version 1 - Prototype" title="Direct link to B.2.4.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_clear_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_data i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the key.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_storage_exists">B.2.5. <code>ext_storage_exists</code><a href="#id-ext_storage_exists" class="hash-link" aria-label="Direct link to id-ext_storage_exists" title="Direct link to id-ext_storage_exists">​</a></h3><p>Checks whether the given key exists in storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-5">B.2.5.1. Version 1 - Prototype<a href="#id-version-1-prototype-5" class="hash-link" aria-label="Direct link to B.2.5.1. Version 1 - Prototype" title="Direct link to B.2.5.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_exists_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the key.</p></li><li><p><code>return</code>: an i32 integer value equal to <em>1</em> if the key exists or a value equal to <em>0</em> if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_storage_clear_prefix">B.2.6. <code>ext_storage_clear_prefix</code><a href="#id-ext_storage_clear_prefix" class="hash-link" aria-label="Direct link to id-ext_storage_clear_prefix" title="Direct link to id-ext_storage_clear_prefix">​</a></h3><p>Clear the storage of each key/value pair where the key starts with the given prefix.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-6">B.2.6.1. Version 1 - Prototype<a href="#id-version-1-prototype-6" class="hash-link" aria-label="Direct link to B.2.6.1. Version 1 - Prototype" title="Direct link to B.2.6.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_clear_prefix_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $prefix i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>prefix</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the prefix.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype">B.2.6.2. Version 2 - Prototype<a href="#id-version-2-prototype" class="hash-link" aria-label="Direct link to B.2.6.2. Version 2 - Prototype" title="Direct link to B.2.6.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_clear_prefix_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $prefix i64) (param $limit i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>prefix</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the prefix.</p></li><li><p><code>limit</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an <em>Option</em> type (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing an unsigned 32-bit integer indicating the limit on how many keys should be deleted. No limit is applied if this is <em>None</em>. Any keys created during the current block execution do not count toward the limit.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the following variant, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span></span>:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>→</mo><mi>c</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>→</mo><mi>c</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">{k}={\left\lbrace\begin{matrix}{0}&amp;\rightarrow{c}\\{1}&amp;\rightarrow{c}\end{matrix}\right.}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">0</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div><p>where <em>0</em> indicates that all keys of the child storage have been removed, followed by the number of removed keys, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">{c}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span></span></span>. The variant <em>1</em> indicates that there are remaining keys, followed by the number of removed keys.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_storage_append">B.2.7. <code>ext_storage_append</code><a href="#id-ext_storage_append" class="hash-link" aria-label="Direct link to id-ext_storage_append" title="Direct link to id-ext_storage_append">​</a></h3><p>Append the SCALE encoded value to a SCALE encoded sequence (<a href="/id-cryptography-encoding#defn-scale-list">Definition 202</a>) at the given key. This function assumes that the existing storage item is either empty or a SCALE-encoded sequence and that the value to append is also SCALE encoded and of the same type as the items in the existing sequence.</p><p>To improve performance, this function is allowed to skip decoding the entire SCALE encoded sequence and instead can just append the new item to the end of the existing data and increment the length prefix <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mtext>Enc</mtext><mtext>SC</mtext><mtext>Len</mtext></msubsup></mrow><annotation encoding="application/x-tex">{\text{Enc}_{{\text{SC}}}^{{\text{Len}}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1616em;vertical-align:-0.247em"></span><span class="mord"><span class="mord"><span class="mord text"><span class="mord">Enc</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9146em"><span style="top:-2.453em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">SC</span></span></span></span></span></span><span style="top:-3.1362em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Len</span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em"><span></span></span></span></span></span></span></span></span></span></span></span>.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>If the storage item does not exist or is not SCALE encoded, the storage item will be set to the specified value, represented as a SCALE-encoded byte array.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-7">B.2.7.1. Version 1 - Prototype<a href="#id-version-1-prototype-7" class="hash-link" aria-label="Direct link to B.2.7.1. Version 1 - Prototype" title="Direct link to B.2.7.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_append_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (param $value i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the value to be appended.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_storage_root">B.2.8. <code>ext_storage_root</code><a href="#id-ext_storage_root" class="hash-link" aria-label="Direct link to id-ext_storage_root" title="Direct link to id-ext_storage_root">​</a></h3><p>Compute the storage root.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-storage-root-version-1">B.2.8.1. Version 1 - Prototype<a href="#sect-ext-storage-root-version-1" class="hash-link" aria-label="Direct link to B.2.8.1. Version 1 - Prototype" title="Direct link to B.2.8.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_root_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to a buffer containing the 256-bit Blake2 storage root.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-storage-root-version-2">B.2.8.2. Version 2 - Prototype<a href="#sect-ext-storage-root-version-2" class="hash-link" aria-label="Direct link to B.2.8.2. Version 2 - Prototype" title="Direct link to B.2.8.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_root_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $version i32) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>version</code>: the state version (<a href="/chap-host-api#defn-state-version">Definition 218</a>).</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the buffer containing the 256-bit Blake2 storage root.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-storage-changes-root">B.2.9. <code>ext_storage_changes_root</code><a href="#sect-ext-storage-changes-root" class="hash-link" aria-label="Direct link to sect-ext-storage-changes-root" title="Direct link to sect-ext-storage-changes-root">​</a></h3><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This function is not longer used and only exists for compatibility reasons.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-8">B.2.9.1. Version 1 - Prototype<a href="#id-version-1-prototype-8" class="hash-link" aria-label="Direct link to B.2.9.1. Version 1 - Prototype" title="Direct link to B.2.9.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_changes_root_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $parent_hash i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>parent_hash</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded block hash.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an <em>Option</em> type (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) that’s always <em>None</em>.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_storage_next_key">B.2.10. <code>ext_storage_next_key</code><a href="#id-ext_storage_next_key" class="hash-link" aria-label="Direct link to id-ext_storage_next_key" title="Direct link to id-ext_storage_next_key">​</a></h3><p>Get the next key in storage after the given one in lexicographic order (<a href="/chap-host-api#defn-lexicographic-ordering">Definition 217</a>). The key provided to this function may or may not exist in storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-9">B.2.10.1. Version 1 - Prototype<a href="#id-version-1-prototype-9" class="hash-link" aria-label="Direct link to B.2.10.1. Version 1 - Prototype" title="Direct link to B.2.10.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_next_key_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the next key in lexicographic order.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-storage-start-transaction">B.2.11. <code>ext_storage_start_transaction</code><a href="#sect-ext-storage-start-transaction" class="hash-link" aria-label="Direct link to sect-ext-storage-start-transaction" title="Direct link to sect-ext-storage-start-transaction">​</a></h3><p>Start a new nested transaction. This allows to either commit or roll back all changes that are made after this call. For every transaction, there must be a matching call to either <code>ext_storage_rollback_transaction</code> (<a href="/chap-host-api#sect-ext-storage-rollback-transaction">Section B.2.12.</a>) or <code>ext_storage_commit_transaction</code> (<a href="/chap-host-api#sect-ext-storage-commit-transaction">Section B.2.13.</a>). This is also effective for all values manipulated using the child storage API (<a href="/chap-host-api#sect-child-storage-api">Section B.3.</a>). It’s legal to call this function multiple times in a row.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>This is a low-level API that is potentially dangerous as it can easily result in unbalanced transactions. Runtimes should use high-level storage abstractions.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-10">B.2.11.1. Version 1 - Prototype<a href="#id-version-1-prototype-10" class="hash-link" aria-label="Direct link to B.2.11.1. Version 1 - Prototype" title="Direct link to B.2.11.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_start_transaction_version_1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li>None.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-storage-rollback-transaction">B.2.12. <code>ext_storage_rollback_transaction</code><a href="#sect-ext-storage-rollback-transaction" class="hash-link" aria-label="Direct link to sect-ext-storage-rollback-transaction" title="Direct link to sect-ext-storage-rollback-transaction">​</a></h3><p>Rollback the last transaction started by <code>ext_storage_start_transaction</code> (<a href="/chap-host-api#sect-ext-storage-start-transaction">Section B.2.11.</a>). Any changes made during that transaction are discarded. It’s legal to call this function multiple times in a row.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Panics if <code>ext_storage_start_transaction</code> (<a href="/chap-host-api#sect-ext-storage-start-transaction">Section B.2.11.</a>) was not called.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-11">B.2.12.1. Version 1 - Prototype<a href="#id-version-1-prototype-11" class="hash-link" aria-label="Direct link to B.2.12.1. Version 1 - Prototype" title="Direct link to B.2.12.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_rollback_transaction_version_1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li>None.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-storage-commit-transaction">B.2.13. <code>ext_storage_commit_transaction</code><a href="#sect-ext-storage-commit-transaction" class="hash-link" aria-label="Direct link to sect-ext-storage-commit-transaction" title="Direct link to sect-ext-storage-commit-transaction">​</a></h3><p>Commit the last transaction started by <code>ext_storage_start_transaction</code> (<a href="/chap-host-api#sect-ext-storage-start-transaction">Section B.2.11.</a>). Any changes made during that transaction are committed to the main state. It’s legal to call this function multiple times in a row.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Panics if <code>ext_storage_start_transaction</code> (<a href="/chap-host-api#sect-ext-storage-start-transaction">Section B.2.11.</a>) was not called.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-12">B.2.13.1. Version 1 - Prototype<a href="#id-version-1-prototype-12" class="hash-link" aria-label="Direct link to B.2.13.1. Version 1 - Prototype" title="Direct link to B.2.13.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_storage_commit_transaction_version_1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li>None.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-child-storage-api">B.3. Child Storage<a href="#sect-child-storage-api" class="hash-link" aria-label="Direct link to B.3. Child Storage" title="Direct link to B.3. Child Storage">​</a></h2><p>Interface for accessing the child storage from within the runtime.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-child-storage-type">Definition 219. Child Storage<a href="#defn-child-storage-type" class="hash-link" aria-label="Direct link to Definition 219. Child Storage" title="Direct link to Definition 219. Child Storage">​</a></h6><div class="alert alert--definition"><h5></h5><div><p><strong>Child storage</strong> key is an unprefixed location of the child trie in the main trie.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_set">B.3.1. <code>ext_default_child_storage_set</code><a href="#id-ext_default_child_storage_set" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_set" title="Direct link to id-ext_default_child_storage_set">​</a></h3><p>Sets the value under a given key into the child storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-13">B.3.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-13" class="hash-link" aria-label="Direct link to B.3.1.1. Version 1 - Prototype" title="Direct link to B.3.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_set_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $key i64) (param $value i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code> : a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the value.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_get">B.3.2. <code>ext_default_child_storage_get</code><a href="#id-ext_default_child_storage_get" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_get" title="Direct link to id-ext_default_child_storage_get">​</a></h3><p>Retrieves the value associated with the given key from the child storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-14">B.3.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-14" class="hash-link" aria-label="Direct link to B.3.2.1. Version 1 - Prototype" title="Direct link to B.3.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_get_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $key i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the value.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_read">B.3.3. <code>ext_default_child_storage_read</code><a href="#id-ext_default_child_storage_read" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_read" title="Direct link to id-ext_default_child_storage_read">​</a></h3><p>Gets the given key from storage, placing the value into a buffer and returning the number of bytes that the entry in storage has beyond the offset.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-15">B.3.3.1. Version 1 - Prototype<a href="#id-version-1-prototype-15" class="hash-link" aria-label="Direct link to B.3.3.1. Version 1 - Prototype" title="Direct link to B.3.3.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_read_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $key i64) (param $value_out i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $offset i32) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>value_out</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the buffer to which the value will be written to. This function will never write more then the length of the buffer, even if the value’s length is bigger.</p></li><li><p><code>offset</code>: an u32 integer (typed as i32 due to wasm types) containing the offset beyond the value should be read from.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the number of bytes written into the <strong>value_out</strong> buffer. Returns if the entry does not exists.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_clear">B.3.4. <code>ext_default_child_storage_clear</code><a href="#id-ext_default_child_storage_clear" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_clear" title="Direct link to id-ext_default_child_storage_clear">​</a></h3><p>Clears the storage of the given key and its value from the child storage. Non-existent entries are silently ignored.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-16">B.3.4.1. Version 1 - Prototype<a href="#id-version-1-prototype-16" class="hash-link" aria-label="Direct link to B.3.4.1. Version 1 - Prototype" title="Direct link to B.3.4.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_clear_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $key i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_storage_kill">B.3.5. <code>ext_default_child_storage_storage_kill</code><a href="#id-ext_default_child_storage_storage_kill" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_storage_kill" title="Direct link to id-ext_default_child_storage_storage_kill">​</a></h3><p>Clears an entire child storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-17">B.3.5.1. Version 1 - Prototype<a href="#id-version-1-prototype-17" class="hash-link" aria-label="Direct link to B.3.5.1. Version 1 - Prototype" title="Direct link to B.3.5.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_storage_kill_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-2">B.3.5.2. Version 2 - Prototype<a href="#id-version-2-prototype-2" class="hash-link" aria-label="Direct link to B.3.5.2. Version 2 - Prototype" title="Direct link to B.3.5.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_storage_kill_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $limit i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>limit</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an <em>Option</em> type (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing an unsigned 32-bit integer indicating the limit on how many keys should be deleted. No limit is applied if this is <em>None</em>. Any keys created during the current block execution do not count toward the limit.</p></li><li><p><code>return</code>: a value equal to <em>1</em> if all the keys of the child storage have been deleted or a value equal to <em>0</em> if there are remaining keys.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-3-prototype">B.3.5.3. Version 3 - Prototype<a href="#id-version-3-prototype" class="hash-link" aria-label="Direct link to B.3.5.3. Version 3 - Prototype" title="Direct link to B.3.5.3. Version 3 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_storage_kill_version_3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $limit i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>limit</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an <em>Option</em> type (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing an unsigned 32-bit integer indicating the limit on how many keys should be deleted. No limit is applied if this is <em>None</em>. Any keys created during the current block execution do not count toward the limit.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the following variant, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span></span>:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>→</mo><mi>c</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>→</mo><mi>c</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">{k}={\left\lbrace\begin{matrix}{0}&amp;\rightarrow{c}\\{1}&amp;\rightarrow{c}\end{matrix}\right.}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">0</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div><p>where <em>0</em> indicates that all keys of the child storage have been removed, followed by the number of removed keys, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">{c}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span></span></span>. The variant <em>1</em> indicates that there are remaining keys, followed by the number of removed keys.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_exists">B.3.6. <code>ext_default_child_storage_exists</code><a href="#id-ext_default_child_storage_exists" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_exists" title="Direct link to id-ext_default_child_storage_exists">​</a></h3><p>Checks whether the given key exists in the child storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-18">B.3.6.1. Version 1 - Prototype<a href="#id-version-1-prototype-18" class="hash-link" aria-label="Direct link to B.3.6.1. Version 1 - Prototype" title="Direct link to B.3.6.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_exists_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $key i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>return</code>: an i32 integer value equal to <em>1</em> if the key exists or a value equal to <em>0</em> if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_clear_prefix">B.3.7. <code>ext_default_child_storage_clear_prefix</code><a href="#id-ext_default_child_storage_clear_prefix" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_clear_prefix" title="Direct link to id-ext_default_child_storage_clear_prefix">​</a></h3><p>Clears the child storage of each key/value pair where the key starts with the given prefix.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-19">B.3.7.1. Version 1 - Prototype<a href="#id-version-1-prototype-19" class="hash-link" aria-label="Direct link to B.3.7.1. Version 1 - Prototype" title="Direct link to B.3.7.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_clear_prefix_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $prefix i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>prefix</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the prefix.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-3">B.3.7.2. Version 2 - Prototype<a href="#id-version-2-prototype-3" class="hash-link" aria-label="Direct link to B.3.7.2. Version 2 - Prototype" title="Direct link to B.3.7.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_clear_prefix_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $prefix i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $limit i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>prefix</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the prefix.</p></li><li><p><code>limit</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an <em>Option</em> type (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing an unsigned 32-bit integer indicating the limit on how many keys should be deleted. No limit is applied if this is <em>None</em>. Any keys created during the current block execution do not count towards the limit.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the following variant, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span></span>:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>k</mi><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>→</mo><mi>c</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>→</mo><mi>c</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">{k}={\left\lbrace\begin{matrix}{0}&amp;\rightarrow{c}\\{1}&amp;\rightarrow{c}\end{matrix}\right.}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size3">{</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">0</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em"><span style="top:-3.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span><span style="top:-2.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div><p>where <em>0</em> indicates that all keys of the child storage have been removed, followed by the number of removed keys, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">{c}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord"><span class="mord mathnormal">c</span></span></span></span></span></span>. The variant <em>1</em> indicates that there are remaining keys, followed by the number of removed keys.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_root">B.3.8. <code>ext_default_child_storage_root</code><a href="#id-ext_default_child_storage_root" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_root" title="Direct link to id-ext_default_child_storage_root">​</a></h3><p>Commits all existing operations and computes the resulting child storage root.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-20">B.3.8.1. Version 1 - Prototype<a href="#id-version-1-prototype-20" class="hash-link" aria-label="Direct link to B.3.8.1. Version 1 - Prototype" title="Direct link to B.3.8.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_root_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded storage root.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-4">B.3.8.2. Version 2 - Prototype<a href="#id-version-2-prototype-4" class="hash-link" aria-label="Direct link to B.3.8.2. Version 2 - Prototype" title="Direct link to B.3.8.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_root_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $version i32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>version</code>: the state version (<a href="/chap-host-api#defn-state-version">Definition 218</a>).</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit Blake2 storage root.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_default_child_storage_next_key">B.3.9. <code>ext_default_child_storage_next_key</code><a href="#id-ext_default_child_storage_next_key" class="hash-link" aria-label="Direct link to id-ext_default_child_storage_next_key" title="Direct link to id-ext_default_child_storage_next_key">​</a></h3><p>Gets the next key in storage after the given one in lexicographic order (<a href="/chap-host-api#defn-lexicographic-ordering">Definition 217</a>). The key provided to this function may or may not exist in storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-21">B.3.9.1. Version 1 - Prototype<a href="#id-version-1-prototype-21" class="hash-link" aria-label="Direct link to B.3.9.1. Version 1 - Prototype" title="Direct link to B.3.9.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_default_child_storage_next_key_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $child_storage_key i64) (param $key i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>child_storage_key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the child storage key (<a href="/chap-host-api#defn-child-storage-type">Definition 219</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded as defined in <a href="/id-cryptography-encoding#defn-option-type">Definition 200</a> containing the next key in lexicographic order. Returns if the entry cannot be found.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-crypto-api">B.4. Crypto<a href="#sect-crypto-api" class="hash-link" aria-label="Direct link to B.4. Crypto" title="Direct link to B.4. Crypto">​</a></h2><p>Interfaces for working with crypto related types from within the runtime.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-key-type-id">Definition 220. Key Type Identifier<a href="#defn-key-type-id" class="hash-link" aria-label="Direct link to Definition 220. Key Type Identifier" title="Direct link to Definition 220. Key Type Identifier">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>Cryptographic keys are stored in separate key stores based on their intended use case. The separate key stores are identified by a 4-byte ASCII <strong>key type identifier</strong>. The following known types are available:</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="tabl-key-type-ids">Table 5. Table of known key type identifiers<a href="#tabl-key-type-ids" class="hash-link" aria-label="Direct link to Table 5. Table of known key type identifiers" title="Direct link to Table 5. Table of known key type identifiers">​</a></h6><table><thead><tr><th>Id</th><th>Description</th></tr></thead><tbody><tr><td>acco</td><td>Key type for the controlling accounts</td></tr><tr><td>babe</td><td>Key type for the Babe module</td></tr><tr><td>gran</td><td>Key type for the Grandpa module</td></tr><tr><td>imon</td><td>Key type for the ImOnline module</td></tr><tr><td>audi</td><td>Key type for the AuthorityDiscovery module</td></tr><tr><td>para</td><td>Key type for the Parachain Validator Key</td></tr><tr><td>asgn</td><td>Key type for the Parachain Assignment Key</td></tr></tbody></table></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-ecdsa-verify-error">Definition 221. ECDSA Verify Error<a href="#defn-ecdsa-verify-error" class="hash-link" aria-label="Direct link to Definition 221. ECDSA Verify Error" title="Direct link to Definition 221. ECDSA Verify Error">​</a></h6><div class="alert alert--definition"><h5></h5><div><p><strong>EcdsaVerifyError</strong> is a varying data type (<a href="/id-cryptography-encoding#defn-varrying-data-type">Definition 198</a>) that specifies the error type when using ECDSA recovery functionality. The following values are possible:</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="tabl-ecdsa-verify-error">Table 6. Table of error types in ECDSA recovery<a href="#tabl-ecdsa-verify-error" class="hash-link" aria-label="Direct link to Table 6. Table of error types in ECDSA recovery" title="Direct link to Table 6. Table of error types in ECDSA recovery">​</a></h6><table><thead><tr><th>Id</th><th>Description</th></tr></thead><tbody><tr><td>0</td><td>Incorrect value of R or S</td></tr><tr><td>1</td><td>Incorrect value of V</td></tr><tr><td>2</td><td>Invalid signature</td></tr></tbody></table></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_ed25519_public_keys">B.4.1. <code>ext_crypto_ed25519_public_keys</code><a href="#id-ext_crypto_ed25519_public_keys" class="hash-link" aria-label="Direct link to id-ext_crypto_ed25519_public_keys" title="Direct link to id-ext_crypto_ed25519_public_keys">​</a></h3><p>Returns all <em>ed25519</em> public keys for the given key identifier from the keystore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-22">B.4.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-22" class="hash-link" aria-label="Direct link to B.4.1.1. Version 1 - Prototype" title="Direct link to B.4.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ed25519_public_keys_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key type identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an SCALE encoded 256-bit public keys.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_ed25519_generate">B.4.2. <code>ext_crypto_ed25519_generate</code><a href="#id-ext_crypto_ed25519_generate" class="hash-link" aria-label="Direct link to id-ext_crypto_ed25519_generate" title="Direct link to id-ext_crypto_ed25519_generate">​</a></h3><p>Generates an <em>ed25519</em> key for the given key type using an optional BIP-39 seed and stores it in the keystore.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Panics if the key cannot be generated, such as when an invalid key type or invalid seed was provided.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-23">B.4.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-23" class="hash-link" aria-label="Direct link to B.4.2.1. Version 1 - Prototype" title="Direct link to B.4.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ed25519_generate_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (param $seed i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key type identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>seed</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the BIP-39 seed which must be valid UTF8.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit public key.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_ed25519_sign">B.4.3. <code>ext_crypto_ed25519_sign</code><a href="#id-ext_crypto_ed25519_sign" class="hash-link" aria-label="Direct link to id-ext_crypto_ed25519_sign" title="Direct link to id-ext_crypto_ed25519_sign">​</a></h3><p>Signs the given message with the <code>ed25519</code> key that corresponds to the given public key and key type in the keystore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-24">B.4.3.1. Version 1 - Prototype<a href="#id-version-1-prototype-24" class="hash-link" aria-label="Direct link to B.4.3.1. Version 1 - Prototype" title="Direct link to B.4.3.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ed25519_sign_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (param $key i32) (param $msg i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key type identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>key</code>: a pointer to the buffer containing the 256-bit public key.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be signed.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the 64-byte signature. This function returns if the public key cannot be found in the key store.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-crypto-ed25519-verify">B.4.4. <code>ext_crypto_ed25519_verify</code><a href="#sect-ext-crypto-ed25519-verify" class="hash-link" aria-label="Direct link to sect-ext-crypto-ed25519-verify" title="Direct link to sect-ext-crypto-ed25519-verify">​</a></h3><p>Verifies an <em>ed25519</em> signature.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-25">B.4.4.1. Version 1 - Prototype<a href="#id-version-1-prototype-25" class="hash-link" aria-label="Direct link to B.4.4.1. Version 1 - Prototype" title="Direct link to B.4.4.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ed25519_verify_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i64) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 64-byte signature.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be verified.</p></li><li><p><code>key</code>: a pointer to the buffer containing the 256-bit public key.</p></li><li><p><code>return</code>: a i32 integer value equal to <em>1</em> if the signature is valid or a value equal to <em>0</em> if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-crypto-ed25519-batch-verify">B.4.5. <code>ext_crypto_ed25519_batch_verify</code><a href="#sect-ext-crypto-ed25519-batch-verify" class="hash-link" aria-label="Direct link to sect-ext-crypto-ed25519-batch-verify" title="Direct link to sect-ext-crypto-ed25519-batch-verify">​</a></h3><p>Registers an ed25519 signature for batch verification. Batch verification is enabled by calling <code>ext_crypto_start_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-start-batch-verify">Section B.4.20.</a>). The result of the verification is returned by <code>ext_crypto_finish_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-finish-batch-verify">Section B.4.21.</a>). If batch verification is not enabled, the signature is verified immediately.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1">B.4.5.1. Version 1<a href="#id-version-1" class="hash-link" aria-label="Direct link to B.4.5.1. Version 1" title="Direct link to B.4.5.1. Version 1">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ed25519_batch_verify_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i64) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 64-byte signature.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be verified.</p></li><li><p><code>key</code>: a pointer to the buffer containing the 256-bit public key.</p></li><li><p><code>return</code>: an i32 integer value equal to <em>1</em> if the signature is valid or batched or a value equal <em>0</em> to if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_sr25519_public_keys">B.4.6. <code>ext_crypto_sr25519_public_keys</code><a href="#id-ext_crypto_sr25519_public_keys" class="hash-link" aria-label="Direct link to id-ext_crypto_sr25519_public_keys" title="Direct link to id-ext_crypto_sr25519_public_keys">​</a></h3><p>Returns all <em>sr25519</em> public keys for the given key id from the keystore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-26">B.4.6.1. Version 1 - Prototype<a href="#id-version-1-prototype-26" class="hash-link" aria-label="Direct link to B.4.6.1. Version 1 - Prototype" title="Direct link to B.4.6.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_sr25519_public_keys_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key type identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded 256-bit public keys.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_sr25519_generate">B.4.7. <code>ext_crypto_sr25519_generate</code><a href="#id-ext_crypto_sr25519_generate" class="hash-link" aria-label="Direct link to id-ext_crypto_sr25519_generate" title="Direct link to id-ext_crypto_sr25519_generate">​</a></h3><p>Generates an <em>sr25519</em> key for the given key type using an optional BIP-39 seed and stores it in the keystore.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Panics if the key cannot be generated, such as when an invalid key type or invalid seed was provided.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-27">B.4.7.1. Version 1 - Prototype<a href="#id-version-1-prototype-27" class="hash-link" aria-label="Direct link to B.4.7.1. Version 1 - Prototype" title="Direct link to B.4.7.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_sr25519_generate_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (param $seed i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>seed</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the BIP-39 seed which must be valid UTF8.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit public key.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_sr25519_sign">B.4.8. <code>ext_crypto_sr25519_sign</code><a href="#id-ext_crypto_sr25519_sign" class="hash-link" aria-label="Direct link to id-ext_crypto_sr25519_sign" title="Direct link to id-ext_crypto_sr25519_sign">​</a></h3><p>Signs the given message with the <em>sr25519</em> key that corresponds to the given public key and key type in the keystore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-28">B.4.8.1. Version 1 - Prototype<a href="#id-version-1-prototype-28" class="hash-link" aria-label="Direct link to B.4.8.1. Version 1 - Prototype" title="Direct link to B.4.8.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_sr25519_sign_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (param $key i32) (param $msg i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>key</code>: a pointer to the buffer containing the 256-bit public key.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be signed.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the 64-byte signature. This function returns <em>None</em> if the public key cannot be found in the key store.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-crypto-sr25519-verify">B.4.9. <code>ext_crypto_sr25519_verify</code><a href="#sect-ext-crypto-sr25519-verify" class="hash-link" aria-label="Direct link to sect-ext-crypto-sr25519-verify" title="Direct link to sect-ext-crypto-sr25519-verify">​</a></h3><p>Verifies an sr25519 signature.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-29">B.4.9.1. Version 1 - Prototype<a href="#id-version-1-prototype-29" class="hash-link" aria-label="Direct link to B.4.9.1. Version 1 - Prototype" title="Direct link to B.4.9.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_sr25519_verify_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i64) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 64-byte signature.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be verified.</p></li><li><p><code>key</code>: a pointer to the buffer containing the 256-bit public key.</p></li><li><p><code>return</code>: a i32 integer value equal to <em>1</em> if the signature is valid or a value equal to <em>0</em> if otherwise.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-5">B.4.9.2. Version 2 - Prototype<a href="#id-version-2-prototype-5" class="hash-link" aria-label="Direct link to B.4.9.2. Version 2 - Prototype" title="Direct link to B.4.9.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_sr25519_verify_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i64) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 64-byte signature.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be verified.</p></li><li><p><code>key</code>: a pointer to the buffer containing the 256-bit public key.</p></li><li><p><code>return</code>: a i32 integer value equal to <em>1</em> if the signature is valid or a value equal to <em>0</em> if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-crypto-sr25519-batch-verify">B.4.10. <code>ext_crypto_sr25519_batch_verify</code><a href="#sect-ext-crypto-sr25519-batch-verify" class="hash-link" aria-label="Direct link to sect-ext-crypto-sr25519-batch-verify" title="Direct link to sect-ext-crypto-sr25519-batch-verify">​</a></h3><p>Registers a sr25519 signature for batch verification. Batch verification is enabled by calling <code>ext_crypto_start_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-start-batch-verify">Section B.4.20.</a>). The result of the verification is returned by <code>ext_crypto_finish_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-finish-batch-verify">Section B.4.21.</a>). If batch verification is not enabled, the signature is verified immediately.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-2">B.4.10.1. Version 1<a href="#id-version-1-2" class="hash-link" aria-label="Direct link to B.4.10.1. Version 1" title="Direct link to B.4.10.1. Version 1">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_sr25519_batch_verify_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i64) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 64-byte signature.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be verified.</p></li><li><p><code>key</code>: a pointer to the buffer containing the 256-bit public key.</p></li><li><p><code>return</code>: an i32 integer value equal to <em>1</em> if the signature is valid or batched or a value equal <em>0</em> to if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_ecdsa_public_keys">B.4.11. <code>ext_crypto_ecdsa_public_keys</code><a href="#id-ext_crypto_ecdsa_public_keys" class="hash-link" aria-label="Direct link to id-ext_crypto_ecdsa_public_keys" title="Direct link to id-ext_crypto_ecdsa_public_keys">​</a></h3><p>Returns all <em>ecdsa</em> public keys for the given key id from the keystore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-30">B.4.11.1. Version 1 - Prototype<a href="#id-version-1-prototype-30" class="hash-link" aria-label="Direct link to B.4.11.1. Version 1 - Prototype" title="Direct link to B.4.11.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ecdsa_public_key_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key type identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded 33-byte compressed public keys.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_ecdsa_generate">B.4.12. <code>ext_crypto_ecdsa_generate</code><a href="#id-ext_crypto_ecdsa_generate" class="hash-link" aria-label="Direct link to id-ext_crypto_ecdsa_generate" title="Direct link to id-ext_crypto_ecdsa_generate">​</a></h3><p>Generates an <em>ecdsa</em> key for the given key type using an optional BIP-39 seed and stores it in the keystore.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Panics if the key cannot be generated, such as when an invalid key type or invalid seed was provided.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-31">B.4.12.1. Version 1 - Prototype<a href="#id-version-1-prototype-31" class="hash-link" aria-label="Direct link to B.4.12.1. Version 1 - Prototype" title="Direct link to B.4.12.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ecdsa_generate_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (param $seed i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>seed</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the BIP-39 seed which must be valid UTF8.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 33-byte compressed public key.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_ecdsa_sign">B.4.13. <code>ext_crypto_ecdsa_sign</code><a href="#id-ext_crypto_ecdsa_sign" class="hash-link" aria-label="Direct link to id-ext_crypto_ecdsa_sign" title="Direct link to id-ext_crypto_ecdsa_sign">​</a></h3><p>Signs the hash of the given message with the <em>ecdsa</em> key that corresponds to the given public key and key type in the keystore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-32">B.4.13.1. Version 1 - Prototype<a href="#id-version-1-prototype-32" class="hash-link" aria-label="Direct link to B.4.13.1. Version 1 - Prototype" title="Direct link to B.4.13.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ecdsa_sign_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (param $key i32) (param $msg i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>key</code>: a pointer to the buffer containing the 33-byte compressed public key.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be signed.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the signature. The signature is 65-bytes in size, where the first 512-bits represent the signature and the other 8 bits represent the recovery ID. This function returns if the public key cannot be found in the key store.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_ecdsa_sign_prehashed">B.4.14. <code>ext_crypto_ecdsa_sign_prehashed</code><a href="#id-ext_crypto_ecdsa_sign_prehashed" class="hash-link" aria-label="Direct link to id-ext_crypto_ecdsa_sign_prehashed" title="Direct link to id-ext_crypto_ecdsa_sign_prehashed">​</a></h3><p>Signs the prehashed message with the <em>ecdsa</em> key that corresponds to the given public key and key type in the keystore.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-33">B.4.14.1. Version 1 - Prototype<a href="#id-version-1-prototype-33" class="hash-link" aria-label="Direct link to B.4.14.1. Version 1 - Prototype" title="Direct link to B.4.14.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ecdsa_sign_prehashed_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key_type_id i32) (param $key i32) (param $msg i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key_type_id</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the key identifier (<a href="/chap-host-api#defn-key-type-id">Definition 220</a>).</p></li><li><p><code>key</code>: a pointer to the buffer containing the 33-byte compressed public key.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be signed.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the signature. The signature is 65-bytes in size, where the first 512-bits represent the signature and the other 8 bits represent the recovery ID. This function returns if the public key cannot be found in the key store.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-crypto-ecdsa-verify">B.4.15. <code>ext_crypto_ecdsa_verify</code><a href="#sect-ext-crypto-ecdsa-verify" class="hash-link" aria-label="Direct link to sect-ext-crypto-ecdsa-verify" title="Direct link to sect-ext-crypto-ecdsa-verify">​</a></h3><p>Verifies the hash of the given message against an ECDSA signature.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-34">B.4.15.1. Version 1 - Prototype<a href="#id-version-1-prototype-34" class="hash-link" aria-label="Direct link to B.4.15.1. Version 1 - Prototype" title="Direct link to B.4.15.1. Version 1 - Prototype">​</a></h4><p>This function allows the verification of non-standard, overflowing ECDSA signatures, an implementation specific mechanism of the Rust <a href="https://github.com/paritytech/libsecp256k1" target="_blank" rel="noopener noreferrer"><code>libsecp256k1</code> library</a>, specifically the <a href="https://docs.rs/libsecp256k1/0.7.0/libsecp256k1/struct.Signature.html#method.parse_overflowing" target="_blank" rel="noopener noreferrer"><code>parse_overflowing</code></a> function.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ecdsa_verify_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i64) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 65-byte signature. The signature is 65-bytes in size, where the first 512-bits represent the signature and the other 8 bits represent the recovery ID.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be verified.</p></li><li><p><code>key</code>: a pointer to the buffer containing the 33-byte compressed public key.</p></li><li><p><code>return</code>: a i32 integer value equal <em>1</em> to if the signature is valid or a value equal to <em>0</em> if otherwise.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-6">B.4.15.2. Version 2 - Prototype<a href="#id-version-2-prototype-6" class="hash-link" aria-label="Direct link to B.4.15.2. Version 2 - Prototype" title="Direct link to B.4.15.2. Version 2 - Prototype">​</a></h4><p>Does not allow the verification of non-standard, overflowing ECDSA signatures.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ecdsa_verify_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i64) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 65-byte signature. The signature is 65-bytes in size, where the first 512-bits represent the signature and the other 8 bits represent the recovery ID.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be verified.</p></li><li><p><code>key</code>: a pointer to the buffer containing the 33-byte compressed public key.</p></li><li><p><code>return</code>: a i32 integer value equal <em>1</em> to if the signature is valid or a value equal to <em>0</em> if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_ecdsa_verify_prehashed">B.4.16. <code>ext_crypto_ecdsa_verify_prehashed</code><a href="#id-ext_crypto_ecdsa_verify_prehashed" class="hash-link" aria-label="Direct link to id-ext_crypto_ecdsa_verify_prehashed" title="Direct link to id-ext_crypto_ecdsa_verify_prehashed">​</a></h3><p>Verifies the prehashed message against a ECDSA signature.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-35">B.4.16.1. Version 1 - Prototype<a href="#id-version-1-prototype-35" class="hash-link" aria-label="Direct link to B.4.16.1. Version 1 - Prototype" title="Direct link to B.4.16.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ecdsa_verify_prehashed_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i32) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 65-byte signature. The signature is 65-bytes in size, where the first 512-bits represent the signature and the other 8 bits represent the recovery ID.</p></li><li><p><code>msg</code>: a pointer to the 32-bit prehashed message to be verified.</p></li><li><p><code>key</code>: a pointer to the 33-byte compressed public key.</p></li><li><p><code>return</code>: a i32 integer value equal <em>1</em> to if the signature is valid or a value equal to <em>0</em> if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-crypto-ecdsa-batch-verify">B.4.17. <code>ext_crypto_ecdsa_batch_verify</code><a href="#sect-ext-crypto-ecdsa-batch-verify" class="hash-link" aria-label="Direct link to sect-ext-crypto-ecdsa-batch-verify" title="Direct link to sect-ext-crypto-ecdsa-batch-verify">​</a></h3><p>Registers a ECDSA signature for batch verification. Batch verification is enabled by calling <code>ext_crypto_start_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-start-batch-verify">Section B.4.20.</a>). The result of the verification is returned by <code>ext_crypto_finish_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-finish-batch-verify">Section B.4.21.</a>). If batch verification is not enabled, the signature is verified immediately.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-3">B.4.17.1. Version 1<a href="#id-version-1-3" class="hash-link" aria-label="Direct link to B.4.17.1. Version 1" title="Direct link to B.4.17.1. Version 1">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_ecdsa_batch_verify_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i64) (param $key i32) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 64-byte signature.</p></li><li><p><code>msg</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the message that is to be verified.</p></li><li><p><code>key</code>: a pointer to the buffer containing the 256-bit public key.</p></li><li><p><code>return</code>: a i32 integer value equal to <em>1</em> if the signature is valid or batched or a value equal <em>0</em> to if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_secp256k1_ecdsa_recover">B.4.18. <code>ext_crypto_secp256k1_ecdsa_recover</code><a href="#id-ext_crypto_secp256k1_ecdsa_recover" class="hash-link" aria-label="Direct link to id-ext_crypto_secp256k1_ecdsa_recover" title="Direct link to id-ext_crypto_secp256k1_ecdsa_recover">​</a></h3><p>Verify and recover a <em>secp256k1</em> ECDSA signature.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-36">B.4.18.1. Version 1 - Prototype<a href="#id-version-1-prototype-36" class="hash-link" aria-label="Direct link to B.4.18.1. Version 1 - Prototype" title="Direct link to B.4.18.1. Version 1 - Prototype">​</a></h4><p>This function can handle non-standard, overflowing ECDSA signatures, an implemenation specific mechanism of the Rust <a href="https://github.com/paritytech/libsecp256k1" target="_blank" rel="noopener noreferrer"><code>libsecp256k1</code> library</a>, specifically the <a href="https://docs.rs/libsecp256k1/0.7.0/libsecp256k1/struct.Signature.html#method.parse_overflowing" target="_blank" rel="noopener noreferrer"><code>parse_overflowing</code></a> function.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_secp256k1_ecdsa_recover_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i32) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 65-byte signature in RSV format. V should be either <code>0/1</code> or <code>27/28</code>.</p></li><li><p><code>msg</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit Blake2 hash of the message.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Result</em> (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). On success it contains the 64-byte recovered public key or an error type (<a href="/chap-host-api#defn-ecdsa-verify-error">Definition 221</a>) on failure.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-7">B.4.18.2. Version 2 - Prototype<a href="#id-version-2-prototype-7" class="hash-link" aria-label="Direct link to B.4.18.2. Version 2 - Prototype" title="Direct link to B.4.18.2. Version 2 - Prototype">​</a></h4><p>Does not handle non-standard, overflowing ECDSA signatures.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_secp256k1_ecdsa_recover_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i32) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 65-byte signature in RSV format. V should be either or .</p></li><li><p><code>msg</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit Blake2 hash of the message.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Result</em> (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). On success it contains the 64-byte recovered public key or an error type (<a href="/chap-host-api#defn-ecdsa-verify-error">Definition 221</a>) on failure.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_crypto_secp256k1_ecdsa_recover_compressed">B.4.19. <code>ext_crypto_secp256k1_ecdsa_recover_compressed</code><a href="#id-ext_crypto_secp256k1_ecdsa_recover_compressed" class="hash-link" aria-label="Direct link to id-ext_crypto_secp256k1_ecdsa_recover_compressed" title="Direct link to id-ext_crypto_secp256k1_ecdsa_recover_compressed">​</a></h3><p>Verify and recover a <em>secp256k1</em> ECDSA signature.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-37">B.4.19.1. Version 1 - Prototype<a href="#id-version-1-prototype-37" class="hash-link" aria-label="Direct link to B.4.19.1. Version 1 - Prototype" title="Direct link to B.4.19.1. Version 1 - Prototype">​</a></h4><p>This function can handle non-standard, overflowing ECDSA signatures, an implemenation specific mechanism of the Rust <a href="https://github.com/paritytech/libsecp256k1" target="_blank" rel="noopener noreferrer"><code>libsecp256k1</code> library</a>, specifically the <a href="https://docs.rs/libsecp256k1/0.7.0/libsecp256k1/struct.Signature.html#method.parse_overflowing" target="_blank" rel="noopener noreferrer"><code>parse_overflowing</code></a> function.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_secp256k1_ecdsa_recover_compressed_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i32) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 65-byte signature in RSV format. V should be either <code>0/1</code> or <code>27/28</code>.</p></li><li><p><code>msg</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit Blake2 hash of the message.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <code>Result</code> value (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). On success it contains the 33-byte recovered public key in compressed form on success or an error type (<a href="/chap-host-api#defn-ecdsa-verify-error">Definition 221</a>) on failure.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-8">B.4.19.2. Version 2 - Prototype<a href="#id-version-2-prototype-8" class="hash-link" aria-label="Direct link to B.4.19.2. Version 2 - Prototype" title="Direct link to B.4.19.2. Version 2 - Prototype">​</a></h4><p>Does not handle non-standard, overflowing ECDSA signatures.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_secp256k1_ecdsa_recover_compressed_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $sig i32) (param $msg i32) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>sig</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 65-byte signature in RSV format. V should be either <code>0/1</code> or <code>27/28</code>.</p></li><li><p><code>msg</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit Blake2 hash of the message.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <code>Result</code> value (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). On success it contains the 33-byte recovered public key in compressed form on success or an error type (<a href="/chap-host-api#defn-ecdsa-verify-error">Definition 221</a>) on failure.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-crypto-start-batch-verify">B.4.20. <code>ext_crypto_start_batch_verify</code><a href="#sect-ext-crypto-start-batch-verify" class="hash-link" aria-label="Direct link to sect-ext-crypto-start-batch-verify" title="Direct link to sect-ext-crypto-start-batch-verify">​</a></h3><p>Starts the verification extension. The extension is a separate background process and is used to parallel-verify signatures which are pushed to the batch with <code>ext_crypto_ed25519_batch_verify</code>(<a href="/chap-host-api#sect-ext-crypto-ed25519-batch-verify">Section B.4.5.</a>), <code>ext_crypto_sr25519_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-sr25519-batch-verify">Section B.4.10.</a>) or <code>ext_crypto_ecdsa_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-ecdsa-batch-verify">Section B.4.17.</a>). Verification will start immediately and the Runtime can retrieve the result when calling <code>ext_crypto_finish_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-finish-batch-verify">Section B.4.21.</a>).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-38">B.4.20.1. Version 1 - Prototype<a href="#id-version-1-prototype-38" class="hash-link" aria-label="Direct link to B.4.20.1. Version 1 - Prototype" title="Direct link to B.4.20.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_start_batch_verify_version_1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li>None.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-crypto-finish-batch-verify">B.4.21. <code>ext_crypto_finish_batch_verify</code><a href="#sect-ext-crypto-finish-batch-verify" class="hash-link" aria-label="Direct link to sect-ext-crypto-finish-batch-verify" title="Direct link to sect-ext-crypto-finish-batch-verify">​</a></h3><p>Finish verifying the batch of signatures since the last call to this function. Blocks until all the signatures are verified.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Panics if <code>ext_crypto_start_batch_verify</code> (<a href="/chap-host-api#sect-ext-crypto-start-batch-verify">Section B.4.20.</a>) was not called.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-39">B.4.21.1. Version 1 - Prototype<a href="#id-version-1-prototype-39" class="hash-link" aria-label="Direct link to B.4.21.1. Version 1 - Prototype" title="Direct link to B.4.21.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_crypto_finish_batch_verify_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>return</code>: an i32 integer value equal to <em>1</em> if all the signatures are valid or a value equal to <em>0</em> if one or more of the signatures are invalid.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-hashing-api">B.5. Hashing<a href="#sect-hashing-api" class="hash-link" aria-label="Direct link to B.5. Hashing" title="Direct link to B.5. Hashing">​</a></h2><p>Interface that provides functions for hashing with different algorithms.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_hashing_keccak_256">B.5.1. <code>ext_hashing_keccak_256</code><a href="#id-ext_hashing_keccak_256" class="hash-link" aria-label="Direct link to id-ext_hashing_keccak_256" title="Direct link to id-ext_hashing_keccak_256">​</a></h3><p>Conducts a 256-bit Keccak hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-40">B.5.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-40" class="hash-link" aria-label="Direct link to B.5.1.1. Version 1 - Prototype" title="Direct link to B.5.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_hashing_keccak_256_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the data to be hashed.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit hash result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_hashing_keccak_512">B.5.2. <code>ext_hashing_keccak_512</code><a href="#id-ext_hashing_keccak_512" class="hash-link" aria-label="Direct link to id-ext_hashing_keccak_512" title="Direct link to id-ext_hashing_keccak_512">​</a></h3><p>Conducts a 512-bit Keccak hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-41">B.5.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-41" class="hash-link" aria-label="Direct link to B.5.2.1. Version 1 - Prototype" title="Direct link to B.5.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_hashing_keccak_512_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the data to be hashed.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 512-bit hash result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_hashing_sha2_256">B.5.3. <code>ext_hashing_sha2_256</code><a href="#id-ext_hashing_sha2_256" class="hash-link" aria-label="Direct link to id-ext_hashing_sha2_256" title="Direct link to id-ext_hashing_sha2_256">​</a></h3><p>Conducts a 256-bit Sha2 hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-42">B.5.3.1. Version 1 - Prototype<a href="#id-version-1-prototype-42" class="hash-link" aria-label="Direct link to B.5.3.1. Version 1 - Prototype" title="Direct link to B.5.3.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_hashing_sha2_256_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the data to be hashed.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit hash result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_hashing_blake2_128">B.5.4. <code>ext_hashing_blake2_128</code><a href="#id-ext_hashing_blake2_128" class="hash-link" aria-label="Direct link to id-ext_hashing_blake2_128" title="Direct link to id-ext_hashing_blake2_128">​</a></h3><p>Conducts a 128-bit Blake2 hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-43">B.5.4.1. Version 1 - Prototype<a href="#id-version-1-prototype-43" class="hash-link" aria-label="Direct link to B.5.4.1. Version 1 - Prototype" title="Direct link to B.5.4.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_hashing_blake2_128_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the data to be hashed.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 128-bit hash result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_hashing_blake2_256">B.5.5. <code>ext_hashing_blake2_256</code><a href="#id-ext_hashing_blake2_256" class="hash-link" aria-label="Direct link to id-ext_hashing_blake2_256" title="Direct link to id-ext_hashing_blake2_256">​</a></h3><p>Conducts a 256-bit Blake2 hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-44">B.5.5.1. Version 1 - Prototype<a href="#id-version-1-prototype-44" class="hash-link" aria-label="Direct link to B.5.5.1. Version 1 - Prototype" title="Direct link to B.5.5.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_hashing_blake2_256_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the data to be hashed.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit hash result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_hashing_twox_64">B.5.6. <code>ext_hashing_twox_64</code><a href="#id-ext_hashing_twox_64" class="hash-link" aria-label="Direct link to id-ext_hashing_twox_64" title="Direct link to id-ext_hashing_twox_64">​</a></h3><p>Conducts a 64-bit xxHash hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-45">B.5.6.1. Version 1 - Prototype<a href="#id-version-1-prototype-45" class="hash-link" aria-label="Direct link to B.5.6.1. Version 1 - Prototype" title="Direct link to B.5.6.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_hashing_twox_64_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the data to be hashed.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 64-bit hash result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_hashing_twox_128">B.5.7. <code>ext_hashing_twox_128</code><a href="#id-ext_hashing_twox_128" class="hash-link" aria-label="Direct link to id-ext_hashing_twox_128" title="Direct link to id-ext_hashing_twox_128">​</a></h3><p>Conducts a 128-bit xxHash hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-46">B.5.7.1. Version 1 - Prototype<a href="#id-version-1-prototype-46" class="hash-link" aria-label="Direct link to B.5.7.1. Version 1 - Prototype" title="Direct link to B.5.7.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_hashing_twox_128</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the data to be hashed.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 128-bit hash result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_hashing_twox_256">B.5.8. <code>ext_hashing_twox_256</code><a href="#id-ext_hashing_twox_256" class="hash-link" aria-label="Direct link to id-ext_hashing_twox_256" title="Direct link to id-ext_hashing_twox_256">​</a></h3><p>Conducts a 256-bit xxHash hash.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-47">B.5.8.1. Version 1 - Prototype<a href="#id-version-1-prototype-47" class="hash-link" aria-label="Direct link to B.5.8.1. Version 1 - Prototype" title="Direct link to B.5.8.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_hashing_twox_256</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the data to be hashed.</p></li><li><p><code>return</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit hash result.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-offchain-api">B.6. Offchain<a href="#sect-offchain-api" class="hash-link" aria-label="Direct link to B.6. Offchain" title="Direct link to B.6. Offchain">​</a></h2><p>The Offchain Workers allow the execution of long-running and possibly non-deterministic tasks (e.g. web requests, encryption/decryption and signing of data, random number generation, CPU-intensive computations, enumeration/aggregation of on-chain data, etc.) which could otherwise require longer than the block execution time. Offchain Workers have their own execution environment. This separation of concerns is to make sure that the block production is not impacted by the long-running tasks.</p><p>All data and results generated by Offchain workers are unique per node and nondeterministic. Information can be propagated to other nodes by submitting a transaction that should be included in the next block. As Offchain workers runs on their own execution environment they have access to their own separate storage. There are two different types of storage available which are defined in <a href="/chap-host-api#defn-offchain-persistent-storage">Definition 222</a> and <a href="/chap-host-api#defn-offchain-local-storage">Definition 223</a>.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-offchain-persistent-storage">Definition 222. Persisted Storage<a href="#defn-offchain-persistent-storage" class="hash-link" aria-label="Direct link to Definition 222. Persisted Storage" title="Direct link to Definition 222. Persisted Storage">​</a></h6><div class="alert alert--definition"><h5></h5><div><p><strong>Persistent storage</strong> is non-revertible and not fork-aware. It means that any value set by the offchain worker is persisted even if that block (at which the worker is called) is reverted as non-canonical (meaning that the block was surpassed by a longer chain). The value is available for the worker that is re-run at the new (different block with the same block number) and future blocks. This storage can be used by offchain workers to handle forks and coordinate offchain workers running on different forks.</p></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-offchain-local-storage">Definition 223. Local Storage<a href="#defn-offchain-local-storage" class="hash-link" aria-label="Direct link to Definition 223. Local Storage" title="Direct link to Definition 223. Local Storage">​</a></h6><div class="alert alert--definition"><h5></h5><div><p><strong>Local storage</strong> is revertible and fork-aware. It means that any value set by the offchain worker triggered at a certain block is reverted if that block is reverted as non-canonical. The value is NOT available for the worker that is re-run at the next or any future blocks.</p></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-http-status-code">Definition 224. HTTP Status Code<a href="#defn-http-status-code" class="hash-link" aria-label="Direct link to Definition 224. HTTP Status Code" title="Direct link to Definition 224. HTTP Status Code">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>An enumerated data type that holds a finite set of distinct variants that gets SCALE-encoded as described in (<a href="/id-cryptography-encoding#defn-scale-variable-type">Definition 199</a>) and returned by offchain http functions. The set of variants is defined as follows.</p><table><thead><tr><th>Id</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>0</td><td><em>DeadlineReached</em></td><td>the deadline for the started request was reached.</td></tr><tr><td>1</td><td><em>IoError</em></td><td>an error has occurred during the request.</td></tr><tr><td>2</td><td><em>Invalid</em></td><td>the specified request identifier is invalid.</td></tr><tr><td>3</td><td><em>Finished(http_status)</em></td><td>the request has finished with the given HTTP status code.</td></tr></tbody></table><p><strong>where</strong></p><ul><li><code>http_status</code>: a 16-bit unsigned integer type representing the <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">HTTP status code</a> to be returned.  </li></ul></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-http-error">Definition 225. HTTP Error<a href="#defn-http-error" class="hash-link" aria-label="Direct link to Definition 225. HTTP Error" title="Direct link to Definition 225. HTTP Error">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>HTTP error, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>E</mi></mrow><annotation encoding="application/x-tex">{E}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span></span></span></span></span></span>, is a varying data type (<a href="/id-cryptography-encoding#defn-varrying-data-type">Definition 198</a>) and specifies the error types of certain HTTP functions. Following values are possible:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>E</mi><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>The deadile was reached</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>There was an IO error while processing the request</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>The Id of the request is invalid</mtext></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">{E}={\left\lbrace\begin{matrix}{0}&amp;\text{The deadile was reached}\\{1}&amp;\text{There was an IO error while processing the request}\\{2}&amp;\text{The Id of the request is invalid}\end{matrix}\right.}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">E</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em"></span><span class="mord"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-2.5em"><span class="pstrut" style="height:3.15em"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.492em"><span class="pstrut" style="height:3.15em"></span><span style="height:0.016em;width:0.8889em"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.016em" style="width:0.8889em" viewBox="0 0 888.89 16" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V16 H384z M384 0 H504 V16 H384z"></path></svg></span></span><span style="top:-3.15em"><span class="pstrut" style="height:3.15em"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em"><span class="pstrut" style="height:3.15em"></span><span style="height:0.016em;width:0.8889em"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.016em" style="width:0.8889em" viewBox="0 0 888.89 16" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V16 H384z M384 0 H504 V16 H384z"></path></svg></span></span><span style="top:-4.3em"><span class="pstrut" style="height:3.15em"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">0</span></span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">1</span></span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em"><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">The deadile was reached</span></span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">There was an IO error while processing the request</span></span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">The Id of the request is invalid</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_is_validator">B.6.1. <code>ext_offchain_is_validator</code><a href="#id-ext_offchain_is_validator" class="hash-link" aria-label="Direct link to id-ext_offchain_is_validator" title="Direct link to id-ext_offchain_is_validator">​</a></h3><p>Check whether the local node is a potential validator. Even if this function returns <em>1</em>, it does not mean that any keys are configured or that the validator is registered in the chain.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-48">B.6.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-48" class="hash-link" aria-label="Direct link to B.6.1.1. Version 1 - Prototype" title="Direct link to B.6.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_is_validator_version_1 (return i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>return</code>: a i32 integer which is equal to <em>1</em> if the local node is a potential validator or a integer equal to <em>0</em> if it is not.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sect-ext-offchain-submit-transaction">B.6.2. <code>ext_offchain_submit_transaction</code><a href="#sect-ext-offchain-submit-transaction" class="hash-link" aria-label="Direct link to sect-ext-offchain-submit-transaction" title="Direct link to sect-ext-offchain-submit-transaction">​</a></h3><p>Given a SCALE encoded extrinsic, this function submits the extrinsic to the Host’s transaction pool, ready to be propagated to remote peers.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-49">B.6.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-49" class="hash-link" aria-label="Direct link to B.6.2.1. Version 1 - Prototype" title="Direct link to B.6.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_submit_transaction_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (return i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the byte array storing the encoded extrinsic.</p></li><li><p><code>return</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Result</em> value (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). Neither on success or failure is there any additional data provided. The cause of a failure is implementation specific.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_network_state">B.6.3. <code>ext_offchain_network_state</code><a href="#id-ext_offchain_network_state" class="hash-link" aria-label="Direct link to id-ext_offchain_network_state" title="Direct link to id-ext_offchain_network_state">​</a></h3><p>Returns the SCALE encoded, opaque information about the local node’s network state.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-opaque-network-state">Definition 226. Opaque Network State<a href="#defn-opaque-network-state" class="hash-link" aria-label="Direct link to Definition 226. Opaque Network State" title="Direct link to Definition 226. Opaque Network State">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>The <strong>Opaque network state structure</strong>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">{S}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span></span>, is a SCALE encoded blob holding information about the the <em>libp2p PeerId</em>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mtext>id</mtext></msub></mrow><annotation encoding="application/x-tex">{P}_{{\text{id}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">id</span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span>, of the local node and a list of <em>libp2p Multiaddresses</em>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo fence="true">(</mo><msub><mi>M</mi><mn>0</mn></msub><mo separator="true">,</mo><mo>…</mo><msub><mi>M</mi><mi>n</mi></msub><mo fence="true">)</mo></mrow><annotation encoding="application/x-tex">{\left({M}_{{0}},\ldots{M}_{{n}}\right)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em">)</span></span></span></span></span></span></span>, the node knows it can be reached at:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo>=</mo><mrow><mo fence="true">(</mo><msub><mi>P</mi><mtext>id</mtext></msub><mo separator="true">,</mo><mrow><mo fence="true">(</mo><msub><mi>M</mi><mn>0</mn></msub><mo separator="true">,</mo><mo>…</mo><msub><mi>M</mi><mi>n</mi></msub><mo fence="true">)</mo></mrow><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">{S}={\left({P}_{{\text{id}}},{\left({M}_{{0}},\ldots{M}_{{n}}\right)}\right)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">id</span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em">)</span></span></span><span class="mclose delimcenter" style="top:0em">)</span></span></span></span></span></span></span></div><p><strong>where</strong></p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>P</mi><mtext>id</mtext></msub><mo>=</mo><mrow><mo fence="true">(</mo><msub><mi>b</mi><mn>0</mn></msub><mo separator="true">,</mo><mo>…</mo><msub><mi>b</mi><mi>n</mi></msub><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">{P}_{{\text{id}}}={\left({b}_{{0}},\ldots{b}_{{n}}\right)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em">P</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">id</span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em">)</span></span></span></span></span></span></span></div><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>M</mi><mo>=</mo><mrow><mo fence="true">(</mo><msub><mi>b</mi><mn>0</mn></msub><mo separator="true">,</mo><mo>…</mo><msub><mi>b</mi><mi>n</mi></msub><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">{M}={\left({b}_{{0}},\ldots{b}_{{n}}\right)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em">M</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em">(</span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">b</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em"><span style="top:-2.55em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em">)</span></span></span></span></span></span></span></div><p>The information contained in this structure is naturally opaque to the caller of this function.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-50">B.6.3.1. Version 1 - Prototype<a href="#id-version-1-prototype-50" class="hash-link" aria-label="Direct link to B.6.3.1. Version 1 - Prototype" title="Direct link to B.6.3.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_network_state_version_1 (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <code>Result</code> value (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). On success it contains the <em>Opaque network state</em> structure (<a href="/chap-host-api#defn-opaque-network-state">Definition 226</a>). On failure, an empty value is yielded where its cause is implementation specific.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_timestamp">B.6.4. <code>ext_offchain_timestamp</code><a href="#id-ext_offchain_timestamp" class="hash-link" aria-label="Direct link to id-ext_offchain_timestamp" title="Direct link to id-ext_offchain_timestamp">​</a></h3><p>Returns the current timestamp.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-51">B.6.4.1. Version 1 - Prototype<a href="#id-version-1-prototype-51" class="hash-link" aria-label="Direct link to B.6.4.1. Version 1 - Prototype" title="Direct link to B.6.4.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_timestamp_version_1 (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>result</code>: an u64 integer (typed as i64 due to wasm types) indicating the current UNIX timestamp (<a href="/id-cryptography-encoding#defn-unix-time">Definition 191</a>).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_sleep_until">B.6.5. <code>ext_offchain_sleep_until</code><a href="#id-ext_offchain_sleep_until" class="hash-link" aria-label="Direct link to id-ext_offchain_sleep_until" title="Direct link to id-ext_offchain_sleep_until">​</a></h3><p>Pause the execution until the <code>deadline</code> is reached.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-52">B.6.5.1. Version 1 - Prototype<a href="#id-version-1-prototype-52" class="hash-link" aria-label="Direct link to B.6.5.1. Version 1 - Prototype" title="Direct link to B.6.5.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_sleep_until_version_1 (param $deadline i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>deadline</code>: an u64 integer (typed as i64 due to wasm types) specifying the UNIX timestamp (<a href="/id-cryptography-encoding#defn-unix-time">Definition 191</a>).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_random_seed">B.6.6. <code>ext_offchain_random_seed</code><a href="#id-ext_offchain_random_seed" class="hash-link" aria-label="Direct link to id-ext_offchain_random_seed" title="Direct link to id-ext_offchain_random_seed">​</a></h3><p>Generates a random seed. This is a truly random non deterministic seed generated by the host environment.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-53">B.6.6.1. Version 1 - Prototype<a href="#id-version-1-prototype-53" class="hash-link" aria-label="Direct link to B.6.6.1. Version 1 - Prototype" title="Direct link to B.6.6.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_random_seed_version_1 (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit seed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_local_storage_set">B.6.7. <code>ext_offchain_local_storage_set</code><a href="#id-ext_offchain_local_storage_set" class="hash-link" aria-label="Direct link to id-ext_offchain_local_storage_set" title="Direct link to id-ext_offchain_local_storage_set">​</a></h3><p>Sets a value in the local storage. This storage is not part of the consensus, it’s only accessible by the offchain worker tasks running on the same machine and is persisted between runs.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-54">B.6.7.1. Version 1 - Prototype<a href="#id-version-1-prototype-54" class="hash-link" aria-label="Direct link to B.6.7.1. Version 1 - Prototype" title="Direct link to B.6.7.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_local_storage_set_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $kind i32) (param $key i64) (param $value i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>kind</code>: an i32 integer indicating the storage kind. A value equal to <em>1</em> is used for a persistent storage (<a href="/chap-host-api#defn-offchain-persistent-storage">Definition 222</a>) and a value equal to <em>2</em> for local storage (<a href="/chap-host-api#defn-offchain-local-storage">Definition 223</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the value.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_local_storage_clear">B.6.8. <code>ext_offchain_local_storage_clear</code><a href="#id-ext_offchain_local_storage_clear" class="hash-link" aria-label="Direct link to id-ext_offchain_local_storage_clear" title="Direct link to id-ext_offchain_local_storage_clear">​</a></h3><p>Remove a value from the local storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-55">B.6.8.1. Version 1 - Prototype<a href="#id-version-1-prototype-55" class="hash-link" aria-label="Direct link to B.6.8.1. Version 1 - Prototype" title="Direct link to B.6.8.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_local_storage_clear_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $kind i32) (param $key i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>kind</code>: an i32 integer indicating the storage kind. A value equal to <em>1</em> is used for a persistent storage (<a href="/chap-host-api#defn-offchain-persistent-storage">Definition 222</a>) and a value equal to <em>2</em> for local storage (<a href="/chap-host-api#defn-offchain-local-storage">Definition 223</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_local_storage_compare_and_set">B.6.9. <code>ext_offchain_local_storage_compare_and_set</code><a href="#id-ext_offchain_local_storage_compare_and_set" class="hash-link" aria-label="Direct link to id-ext_offchain_local_storage_compare_and_set" title="Direct link to id-ext_offchain_local_storage_compare_and_set">​</a></h3><p>Sets a new value in the local storage if the condition matches the current value.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-56">B.6.9.1. Version 1 - Prototype<a href="#id-version-1-prototype-56" class="hash-link" aria-label="Direct link to B.6.9.1. Version 1 - Prototype" title="Direct link to B.6.9.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(fund $ext_offchain_local_storage_compare_and_set_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $kind i32) (param $key i64) (param $old_value i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $new_value i64) (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>kind</code>: an i32 integer indicating the storage kind. A value equal to <em>1</em> is used for a persistent storage (<a href="/chap-host-api#defn-offchain-persistent-storage">Definition 222</a>) and a value equal to <em>2</em> for local storage (<a href="/chap-host-api#defn-offchain-local-storage">Definition 223</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>old_value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the old key.</p></li><li><p><code>new_value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the new value.</p></li><li><p><code>result</code>: an i32 integer equal to <em>1</em> if the new value has been set or a value equal to <em>0</em> if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_local_storage_get">B.6.10. <code>ext_offchain_local_storage_get</code><a href="#id-ext_offchain_local_storage_get" class="hash-link" aria-label="Direct link to id-ext_offchain_local_storage_get" title="Direct link to id-ext_offchain_local_storage_get">​</a></h3><p>Gets a value from the local storage.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-57">B.6.10.1. Version 1 - Prototype<a href="#id-version-1-prototype-57" class="hash-link" aria-label="Direct link to B.6.10.1. Version 1 - Prototype" title="Direct link to B.6.10.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_local_storage_get_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $kind i32) (param $key i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>kind</code>: an i32 integer indicating the storage kind. A value equal to <em>1</em> is used for a persistent storage (<a href="/chap-host-api#defn-offchain-persistent-storage">Definition 222</a>) and a value equal to <em>2</em> for local storage (<a href="/chap-host-api#defn-offchain-local-storage">Definition 223</a>).</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the value or the corresponding key.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_http_request_start">B.6.11. <code>ext_offchain_http_request_start</code><a href="#id-ext_offchain_http_request_start" class="hash-link" aria-label="Direct link to id-ext_offchain_http_request_start" title="Direct link to id-ext_offchain_http_request_start">​</a></h3><p>Initiates a HTTP request given by the HTTP method and the URL. Returns the Id of a newly started request.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-58">B.6.11.1. Version 1 - Prototype<a href="#id-version-1-prototype-58" class="hash-link" aria-label="Direct link to B.6.11.1. Version 1 - Prototype" title="Direct link to B.6.11.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_http_request_start_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (param $method i64) (param $uri i64) (param $meta i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>method</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the HTTP method. Possible values are “GET” and “POST”.</p></li><li><p><code>uri</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the URI.</p></li><li><p><code>meta</code>: a future-reserved field containing additional, SCALE encoded parameters. Currently, an empty array should be passed.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Result</em> value (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>) containing the i16 ID of the newly started request. On failure no additionally data is provided. The cause of failure is implementation specific.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_http_request_add_header">B.6.12. <code>ext_offchain_http_request_add_header</code><a href="#id-ext_offchain_http_request_add_header" class="hash-link" aria-label="Direct link to id-ext_offchain_http_request_add_header" title="Direct link to id-ext_offchain_http_request_add_header">​</a></h3><p>Append header to the request. Returns an error if the request identifier is invalid, <code>http_response_wait</code> has already been called on the specified request identifier, the deadline is reached or an I/O error has happened (e.g. the remote has closed the connection).</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-59">B.6.12.1. Version 1 - Prototype<a href="#id-version-1-prototype-59" class="hash-link" aria-label="Direct link to B.6.12.1. Version 1 - Prototype" title="Direct link to B.6.12.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_http_request_add_header_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $request_id i32) (param $name i64) (param $value i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>request_id</code>: an i32 integer indicating the ID of the started request.</p></li><li><p><code>name</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the HTTP header name.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the HTTP header value.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Result</em> value (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). Neither on success or failure is there any additional data provided. The cause of failure is implementation specific.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_http_request_write_body">B.6.13. <code>ext_offchain_http_request_write_body</code><a href="#id-ext_offchain_http_request_write_body" class="hash-link" aria-label="Direct link to id-ext_offchain_http_request_write_body" title="Direct link to id-ext_offchain_http_request_write_body">​</a></h3><p>Writes a chunk of the request body. Returns a non-zero value in case the deadline is reached or the chunk could not be written.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-60">B.6.13.1. Version 1 - Prototype<a href="#id-version-1-prototype-60" class="hash-link" aria-label="Direct link to B.6.13.1. Version 1 - Prototype" title="Direct link to B.6.13.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_http_request_write_body_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $request_id i32) (param $chunk i64) (param $deadline i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>request_id</code>: an i32 integer indicating the ID of the started request.</p></li><li><p><code>chunk</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the chunk of bytes. Writing an empty chunk finalizes the request.</p></li><li><p><code>deadline</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the UNIX timestamp (<a href="/id-cryptography-encoding#defn-unix-time">Definition 191</a>). Passing <em>None</em> blocks indefinitely.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Result</em> value (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). On success, no additional data is provided. On error it contains the HTTP error type (<a href="/chap-host-api#defn-http-error">Definition 225</a>).</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_http_response_wait">B.6.14. <code>ext_offchain_http_response_wait</code><a href="#id-ext_offchain_http_response_wait" class="hash-link" aria-label="Direct link to id-ext_offchain_http_response_wait" title="Direct link to id-ext_offchain_http_response_wait">​</a></h3><p>Returns an array of request statuses (the length is the same as IDs). Note that if deadline is not provided the method will block indefinitely, otherwise unready responses will produce DeadlineReached status.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-61">B.6.14.1. Version 1 - Prototype<a href="#id-version-1-prototype-61" class="hash-link" aria-label="Direct link to B.6.14.1. Version 1 - Prototype" title="Direct link to B.6.14.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_http_response_wait_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $ids i64) (param $deadline i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>ids</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded array of started request IDs.</p></li><li><p><code>deadline</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the UNIX timestamp (<a href="/id-cryptography-encoding#defn-unix-time">Definition 191</a>). Passing None blocks indefinitely.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded array of request statuses (<a href="/chap-host-api#defn-http-status-code">Definition 224</a>).</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_http_response_headers">B.6.15. <code>ext_offchain_http_response_headers</code><a href="#id-ext_offchain_http_response_headers" class="hash-link" aria-label="Direct link to id-ext_offchain_http_response_headers" title="Direct link to id-ext_offchain_http_response_headers">​</a></h3><p>Read all HTTP response headers. Returns an array of key/value pairs. Response headers must be read before the response body.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-62">B.6.15.1. Version 1 - Prototype<a href="#id-version-1-prototype-62" class="hash-link" aria-label="Direct link to B.6.15.1. Version 1 - Prototype" title="Direct link to B.6.15.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_http_response_headers_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $request_id i32) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>request_id</code>: an i32 integer indicating the ID of the started request.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to a SCALE encoded array of key/value pairs.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_offchain_http_response_read_body">B.6.16. <code>ext_offchain_http_response_read_body</code><a href="#id-ext_offchain_http_response_read_body" class="hash-link" aria-label="Direct link to id-ext_offchain_http_response_read_body" title="Direct link to id-ext_offchain_http_response_read_body">​</a></h3><p>Reads a chunk of body response to the given buffer. Returns the number of bytes written or an error in case a deadline is reached or the server closed the connection. If 0 is returned it means that the response has been fully consumed and the request_id is now invalid. This implies that response headers must be read before draining the body.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-63">B.6.16.1. Version 1 - Prototype<a href="#id-version-1-prototype-63" class="hash-link" aria-label="Direct link to B.6.16.1. Version 1 - Prototype" title="Direct link to B.6.16.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_http_response_read_body_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $request_id i32) (param $buffer i64) (param $deadline i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>request_id</code>: an i32 integer indicating the ID of the started request.</p></li><li><p><code>buffer</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the buffer where the body gets written to.</p></li><li><p><code>deadline</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the UNIX timestamp (<a href="/id-cryptography-encoding#defn-unix-time">Definition 191</a>). Passing <em>None</em> will block indefinitely.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Result</em> value (<a href="/id-cryptography-encoding#defn-result-type">Definition 201</a>). On success it contains an i32 integer specifying the number of bytes written or a HTTP error type (<a href="/chap-host-api#defn-http-error">Definition 225</a>) on failure.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-offchainindex-api">B.7. Offchain Index<a href="#sect-offchainindex-api" class="hash-link" aria-label="Direct link to B.7. Offchain Index" title="Direct link to B.7. Offchain Index">​</a></h2><p>Interface that provides functions to access the Offchain DB through offchain indexing. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-offchain_index_set">B.7.1. <code>Offchain_index_set</code><a href="#id-offchain_index_set" class="hash-link" aria-label="Direct link to id-offchain_index_set" title="Direct link to id-offchain_index_set">​</a></h3><p>Write a key-value pair to the Offchain DB in a buffered fashion. </p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-Offchain_index_set">B.7.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-Offchain_index_set" class="hash-link" aria-label="Direct link to B.7.1.1. Version 1 - Prototype" title="Direct link to B.7.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_index_set_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (param $value i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the value.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-offchain_index_clear">B.7.2. <code>Offchain_index_clear</code><a href="#id-offchain_index_clear" class="hash-link" aria-label="Direct link to id-offchain_index_clear" title="Direct link to id-offchain_index_clear">​</a></h3><p>Remove a key and its associated value from the Offchain DB.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-Offchain_index_clear">B.7.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-Offchain_index_clear" class="hash-link" aria-label="Direct link to B.7.2.1. Version 1 - Prototype" title="Direct link to B.7.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_offchain_index_clear_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) containing the key.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-trie-api">B.8. Trie<a href="#sect-trie-api" class="hash-link" aria-label="Direct link to B.8. Trie" title="Direct link to B.8. Trie">​</a></h2><p>Interface that provides trie related functionality.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_trie_blake2_256_root">B.8.1. <code>ext_trie_blake2_256_root</code><a href="#id-ext_trie_blake2_256_root" class="hash-link" aria-label="Direct link to id-ext_trie_blake2_256_root" title="Direct link to id-ext_trie_blake2_256_root">​</a></h3><p>Compute a 256-bit Blake2 trie root formed from the iterated items.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-64">B.8.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-64" class="hash-link" aria-label="Direct link to B.8.1.1. Version 1 - Prototype" title="Direct link to B.8.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_blake2_256_root_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the iterated items from which the trie root gets formed. The items consist of a SCALE encoded array containing arbitrary key/value pairs (tuples).</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit trie root.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-9">B.8.1.2. Version 2 - Prototype<a href="#id-version-2-prototype-9" class="hash-link" aria-label="Direct link to B.8.1.2. Version 2 - Prototype" title="Direct link to B.8.1.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_blake2_256_root_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (param $version i32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the iterated items from which the trie root gets formed. The items consist of a SCALE encoded array containing arbitrary key/value pairs (tuples).</p></li><li><p><code>version</code>: the state version (<a href="/chap-host-api#defn-state-version">Definition 218</a>).</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit trie root.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_trie_blake2_256_ordered_root">B.8.2. <code>ext_trie_blake2_256_ordered_root</code><a href="#id-ext_trie_blake2_256_ordered_root" class="hash-link" aria-label="Direct link to id-ext_trie_blake2_256_ordered_root" title="Direct link to id-ext_trie_blake2_256_ordered_root">​</a></h3><p>Compute a 256-bit Blake2 trie root formed from the enumerated items.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-65">B.8.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-65" class="hash-link" aria-label="Direct link to B.8.2.1. Version 1 - Prototype" title="Direct link to B.8.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_blake2_256_ordered_root_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the enumerated items from which the trie root gets formed. The items consist of a SCALE encoded array containing only values, where the corresponding key of each value is the index of the item in the array, starting at 0. The keys are compact encoded integers (<a href="/id-cryptography-encoding#defn-sc-len-encoding">Definition 208</a>).</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit trie root result.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-10">B.8.2.2. Version 2 - Prototype<a href="#id-version-2-prototype-10" class="hash-link" aria-label="Direct link to B.8.2.2. Version 2 - Prototype" title="Direct link to B.8.2.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_blake2_256_ordered_root_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (param $version i32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the enumerated items from which the trie root gets formed. The items consist of a SCALE encoded array containing only values, where the corresponding key of each value is the index of the item in the array, starting at 0. The keys are compact encoded integers (<a href="/id-cryptography-encoding#defn-sc-len-encoding">Definition 208</a>).</p></li><li><p><code>version</code>: the state version (<a href="/chap-host-api#defn-state-version">Definition 218</a>).</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit trie root result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_trie_keccak_256_root">B.8.3. <code>ext_trie_keccak_256_root</code><a href="#id-ext_trie_keccak_256_root" class="hash-link" aria-label="Direct link to id-ext_trie_keccak_256_root" title="Direct link to id-ext_trie_keccak_256_root">​</a></h3><p>Compute a 256-bit Keccak trie root formed from the iterated items.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-66">B.8.3.1. Version 1 - Prototype<a href="#id-version-1-prototype-66" class="hash-link" aria-label="Direct link to B.8.3.1. Version 1 - Prototype" title="Direct link to B.8.3.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_keccak_256_root_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the iterated items from which the trie root gets formed. The items consist of a SCALE encoded array containing arbitrary key/value pairs.</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit trie root.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-11">B.8.3.2. Version 2 - Prototype<a href="#id-version-2-prototype-11" class="hash-link" aria-label="Direct link to B.8.3.2. Version 2 - Prototype" title="Direct link to B.8.3.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_keccak_256_root_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (param $version i32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the iterated items from which the trie root gets formed. The items consist of a SCALE encoded array containing arbitrary key/value pairs.</p></li><li><p><code>version</code>: the state version (<a href="/chap-host-api#defn-state-version">Definition 218</a>).</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit trie root.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_trie_keccak_256_ordered_root">B.8.4. <code>ext_trie_keccak_256_ordered_root</code><a href="#id-ext_trie_keccak_256_ordered_root" class="hash-link" aria-label="Direct link to id-ext_trie_keccak_256_ordered_root" title="Direct link to id-ext_trie_keccak_256_ordered_root">​</a></h3><p>Compute a 256-bit Keccak trie root formed from the enumerated items.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-67">B.8.4.1. Version 1 - Prototype<a href="#id-version-1-prototype-67" class="hash-link" aria-label="Direct link to B.8.4.1. Version 1 - Prototype" title="Direct link to B.8.4.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_keccak_256_ordered_root_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the enumerated items from which the trie root gets formed. The items consist of a SCALE encoded array containing only values, where the corresponding key of each value is the index of the item in the array, starting at 0. The keys are compact encoded integers (<a href="/id-cryptography-encoding#defn-sc-len-encoding">Definition 208</a>).</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit trie root result.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-12">B.8.4.2. Version 2 - Prototype<a href="#id-version-2-prototype-12" class="hash-link" aria-label="Direct link to B.8.4.2. Version 2 - Prototype" title="Direct link to B.8.4.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_keccak_256_ordered_root_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $data i64) (param $version i32)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the enumerated items from which the trie root gets formed. The items consist of a SCALE encoded array containing only values, where the corresponding key of each value is the index of the item in the array, starting at 0. The keys are compact encoded integers (<a href="/id-cryptography-encoding#defn-sc-len-encoding">Definition 208</a>).</p></li><li><p><code>version</code>: the state version (<a href="/chap-host-api#defn-state-version">Definition 218</a>).</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the buffer containing the 256-bit trie root result.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_trie_blake2_256_verify_proof">B.8.5. <code>ext_trie_blake2_256_verify_proof</code><a href="#id-ext_trie_blake2_256_verify_proof" class="hash-link" aria-label="Direct link to id-ext_trie_blake2_256_verify_proof" title="Direct link to id-ext_trie_blake2_256_verify_proof">​</a></h3><p>Verifies a key/value pair against a Blake2 256-bit merkle root.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-68">B.8.5.1. Version 1 - Prototype<a href="#id-version-1-prototype-68" class="hash-link" aria-label="Direct link to B.8.5.1. Version 1 - Prototype" title="Direct link to B.8.5.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_blake2_256_verify_proof_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $root i32) (param $proof i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (param $value i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>root</code>: a pointer to the 256-bit merkle root.</p></li><li><p><code>proof</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an array containing the node proofs.</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the value.</p></li><li><p><code>return</code>: a value equal to <em>1</em> if the proof could be successfully verified or a value equal to <em>0</em> if otherwise.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-13">B.8.5.2. Version 2 - Prototype<a href="#id-version-2-prototype-13" class="hash-link" aria-label="Direct link to B.8.5.2. Version 2 - Prototype" title="Direct link to B.8.5.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_blake2_256_verify_proof_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $root i32) (param $proof i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (param $value i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $version i32) (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>root</code>: a pointer to the 256-bit merkle root.</p></li><li><p><code>proof</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an array containing the node proofs.</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the value.</p></li><li><p><code>version</code>: the state version (<a href="/chap-host-api#defn-state-version">Definition 218</a>).</p></li><li><p><code>return</code>: a value equal to <em>1</em> if the proof could be successfully verified or a value equal to <em>0</em> if otherwise.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_trie_keccak_256_verify_proof">B.8.6. <code>ext_trie_keccak_256_verify_proof</code><a href="#id-ext_trie_keccak_256_verify_proof" class="hash-link" aria-label="Direct link to id-ext_trie_keccak_256_verify_proof" title="Direct link to id-ext_trie_keccak_256_verify_proof">​</a></h3><p>Verifies a key/value pair against a Keccak 256-bit merkle root.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-69">B.8.6.1. Version 1 - Prototype<a href="#id-version-1-prototype-69" class="hash-link" aria-label="Direct link to B.8.6.1. Version 1 - Prototype" title="Direct link to B.8.6.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_keccak_256_verify_proof_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $root i32) (param $proof i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (param $value i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>root</code>: a pointer to the 256-bit merkle root.</p></li><li><p><code>proof</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an array containing the node proofs.</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the value.</p></li><li><p><code>return</code>: a value equal to <em>1</em> if the proof could be successfully verified or a value equal to <em>0</em> if otherwise.</p></li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-2-prototype-14">B.8.6.2. Version 2 - Prototype<a href="#id-version-2-prototype-14" class="hash-link" aria-label="Direct link to B.8.6.2. Version 2 - Prototype" title="Direct link to B.8.6.2. Version 2 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_trie_keccak_256_verify_proof_version_2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $root i32) (param $proof i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $key i64) (param $value i64)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $version i32) (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>root</code>: a pointer to the 256-bit merkle root.</p></li><li><p><code>proof</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to an array containing the node proofs.</p></li><li><p><code>key</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the key.</p></li><li><p><code>value</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the value.</p></li><li><p><code>version</code>: the state version (<a href="/chap-host-api#defn-state-version">Definition 218</a>).</p></li><li><p><code>return</code>: a value equal to <em>1</em> if the proof could be successfully verified or a value equal to <em>0</em> if otherwise.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-misc-api">B.9. Miscellaneous<a href="#sect-misc-api" class="hash-link" aria-label="Direct link to B.9. Miscellaneous" title="Direct link to B.9. Miscellaneous">​</a></h2><p>Interface that provides miscellaneous functions for communicating between the runtime and the node.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_misc_print_num">B.9.1. <code>ext_misc_print_num</code><a href="#id-ext_misc_print_num" class="hash-link" aria-label="Direct link to id-ext_misc_print_num" title="Direct link to id-ext_misc_print_num">​</a></h3><p>Print a number.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-70">B.9.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-70" class="hash-link" aria-label="Direct link to B.9.1.1. Version 1 - Prototype" title="Direct link to B.9.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_misc_print_num_version_1 (param $value i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>value</code>: the number to be printed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_misc_print_utf8">B.9.2. <code>ext_misc_print_utf8</code><a href="#id-ext_misc_print_utf8" class="hash-link" aria-label="Direct link to id-ext_misc_print_utf8" title="Direct link to id-ext_misc_print_utf8">​</a></h3><p>Print a valid UTF8 encoded buffer.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-71">B.9.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-71" class="hash-link" aria-label="Direct link to B.9.2.1. Version 1 - Prototype" title="Direct link to B.9.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_misc_print_utf8_version_1 (param $data i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>:</p><ul><li>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the valid buffer to be printed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_misc_print_hex">B.9.3. <code>ext_misc_print_hex</code><a href="#id-ext_misc_print_hex" class="hash-link" aria-label="Direct link to id-ext_misc_print_hex" title="Direct link to id-ext_misc_print_hex">​</a></h3><p>Print any buffer in hexadecimal representation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-72">B.9.3.1. Version 1 - Prototype<a href="#id-version-1-prototype-72" class="hash-link" aria-label="Direct link to B.9.3.1. Version 1 - Prototype" title="Direct link to B.9.3.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_misc_print_hex_version_1 (param $data i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>:</p><ul><li><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the buffer to be printed.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_misc_runtime_version">B.9.4. <code>ext_misc_runtime_version</code><a href="#id-ext_misc_runtime_version" class="hash-link" aria-label="Direct link to id-ext_misc_runtime_version" title="Direct link to id-ext_misc_runtime_version">​</a></h3><p>Extract the Runtime version of the given Wasm blob by calling <code>Core_version</code> (<a href="/chap-runtime-api#defn-rt-core-version">Section C.4.1.</a>). Returns the SCALE encoded runtime version or <em>None</em> (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) if the call fails. This function gets primarily used when upgrading Runtimes.</p><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>Calling this function is very expensive and should only be done very occasionally. For getting the runtime version, it requires instantiating the Wasm blob (<a href="/chap-state#sect-loading-runtime-code">Section 2.6.2.</a>) and calling the <code>Core_version</code> function (<a href="/chap-runtime-api#defn-rt-core-version">Section C.4.1.</a>) in this blob.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-73">B.9.4.1. Version 1 - Prototype<a href="#id-version-1-prototype-73" class="hash-link" aria-label="Direct link to B.9.4.1. Version 1 - Prototype" title="Direct link to B.9.4.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_misc_runtime_version_version_1 (param $data i64) (result i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>data</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the Wasm blob.</p></li><li><p><code>result</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the SCALE encoded <em>Option</em> value (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the Runtime version of the given Wasm blob which is encoded as a byte array.</p></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-allocator-api">B.10. Allocator<a href="#sect-allocator-api" class="hash-link" aria-label="Direct link to B.10. Allocator" title="Direct link to B.10. Allocator">​</a></h2><p>The Polkadot Runtime does not include a memory allocator and relies on the Host API for all heap allocations. The beginning of this heap is marked by the <code>__heap_base</code> symbol exported by the Polkadot Runtime. No memory should be allocated below that address, to avoid clashes with the stack and data section. The same allocator made accessible by this Host API should be used for any other WASM memory allocations and deallocations outside the runtime e.g. when passing the SCALE-encoded parameters to Runtime API calls.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_allocator_malloc">B.10.1. <code>ext_allocator_malloc</code><a href="#id-ext_allocator_malloc" class="hash-link" aria-label="Direct link to id-ext_allocator_malloc" title="Direct link to id-ext_allocator_malloc">​</a></h3><p>Allocates the given number of bytes and returns the pointer to that memory location.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-74">B.10.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-74" class="hash-link" aria-label="Direct link to B.10.1.1. Version 1 - Prototype" title="Direct link to B.10.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_allocator_malloc_version_1 (param $size i32) (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>size</code>: the size of the buffer to be allocated.</p></li><li><p><code>result</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the allocated buffer.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_allocator_free">B.10.2. <code>ext_allocator_free</code><a href="#id-ext_allocator_free" class="hash-link" aria-label="Direct link to id-ext_allocator_free" title="Direct link to id-ext_allocator_free">​</a></h3><p>Free the given pointer.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-75">B.10.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-75" class="hash-link" aria-label="Direct link to B.10.2.1. Version 1 - Prototype" title="Direct link to B.10.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_allocator_free_version_1 (param $ptr i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>ptr</code>: a pointer (<a href="/chap-host-api#defn-runtime-pointer">Definition 215</a>) to the memory buffer to be freed.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-logging-api">B.11. Logging<a href="#sect-logging-api" class="hash-link" aria-label="Direct link to B.11. Logging" title="Direct link to B.11. Logging">​</a></h2><p>Interface that provides functions for logging from within the runtime.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="defn-logging-log-level">Definition 227. Log Level<a href="#defn-logging-log-level" class="hash-link" aria-label="Direct link to Definition 227. Log Level" title="Direct link to Definition 227. Log Level">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>The <strong>Log Level</strong>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">{L}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord"><span class="mord mathnormal">L</span></span></span></span></span></span>, is a varying data type (<a href="/id-cryptography-encoding#defn-varrying-data-type">Definition 198</a>) and implies the emergency of the log. Possible log levels and the corresponding identifier is as follows:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Error = 1</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Warn = 2</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Info = 3</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Debug = 4</mtext></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mtext>Trace = 5</mtext></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">{L}={\left\lbrace\begin{matrix}{0}&amp;\text{Error = 1}\\{1}&amp;\text{Warn = 2}\\{2}&amp;\text{Info = 3}\\{3}&amp;\text{Debug = 4}\\{4}&amp;\text{Trace = 5}\end{matrix}\right.}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord"><span class="mord mathnormal">L</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:6em;vertical-align:-2.75em"></span><span class="mord"><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em"><span style="top:-1.366em"><span class="pstrut" style="height:3.216em"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-1.358em"><span class="pstrut" style="height:3.216em"></span><span style="height:1.216em;width:0.8889em"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="1.216em" style="width:0.8889em" viewBox="0 0 888.89 1216" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V1216 H384z M384 0 H504 V1216 H384z"></path></svg></span></span><span style="top:-3.216em"><span class="pstrut" style="height:3.216em"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.358em"><span class="pstrut" style="height:3.216em"></span><span style="height:1.216em;width:0.8889em"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="1.216em" style="width:0.8889em" viewBox="0 0 888.89 1216" preserveAspectRatio="xMinYMin"><path d="M384 0 H504 V1216 H384z M384 0 H504 V1216 H384z"></path></svg></span></span><span style="top:-5.566em"><span class="pstrut" style="height:3.216em"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em"><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">0</span></span></span></span><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">1</span></span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">2</span></span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">3</span></span></span></span><span style="top:-0.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord">4</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em"></span><span class="arraycolsep" style="width:0.5em"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em"><span style="top:-5.41em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Error = 1</span></span></span></span><span style="top:-4.21em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Warn = 2</span></span></span></span><span style="top:-3.01em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Info = 3</span></span></span></span><span style="top:-1.81em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Debug = 4</span></span></span></span><span style="top:-0.61em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">Trace = 5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_logging_log">B.11.1. <code>ext_logging_log</code><a href="#id-ext_logging_log" class="hash-link" aria-label="Direct link to id-ext_logging_log" title="Direct link to id-ext_logging_log">​</a></h3><p>Request to print a log message on the host. Note that this will be only displayed if the host is enabled to display log messages with given level and target.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-76">B.11.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-76" class="hash-link" aria-label="Direct link to B.11.1.1. Version 1 - Prototype" title="Direct link to B.11.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_logging_log_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $level i32) (param $target i64) (param $message i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><p><code>level</code>: the log level (<a href="/chap-host-api#defn-logging-log-level">Definition 227</a>).</p></li><li><p><code>target</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the string which contains the path, module or location from where the log was executed.</p></li><li><p><code>message</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the UTF-8 encoded log message.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_logging_max_level">B.11.2. <code>ext_logging_max_level</code><a href="#id-ext_logging_max_level" class="hash-link" aria-label="Direct link to id-ext_logging_max_level" title="Direct link to id-ext_logging_max_level">​</a></h3><p>Returns the max logging level used by the host.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-max_level">B.11.2.1. Version 1 - Prototype<a href="#id-version-1-prototype-max_level" class="hash-link" aria-label="Direct link to B.11.2.1. Version 1 - Prototype" title="Direct link to B.11.2.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_logging_max_level_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     (result i32))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong></p><ul><li><em>None</em></li></ul><p><strong>Returns</strong>  </p><ul><li><code>result</code>: the max log level (<a href="/chap-host-api#defn-logging-log-level">Definition 227</a>) used by the host.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="id-abort-handler">B.12. Abort Handler<a href="#id-abort-handler" class="hash-link" aria-label="Direct link to B.12. Abort Handler" title="Direct link to B.12. Abort Handler">​</a></h2><p>Interface for aborting the execution of the runtime.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-ext_panic_handler_abort_on_panic">B.12.1. <code>ext_panic_handler_abort_on_panic</code><a href="#id-ext_panic_handler_abort_on_panic" class="hash-link" aria-label="Direct link to id-ext_panic_handler_abort_on_panic" title="Direct link to id-ext_panic_handler_abort_on_panic">​</a></h3><p>Aborts the execution of the runtime with a given message. Note that the message will be only displayed if the host is enabled to display those types of messages, which is implementation specific.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="id-version-1-prototype-77">B.12.1.1. Version 1 - Prototype<a href="#id-version-1-prototype-77" class="hash-link" aria-label="Direct link to B.12.1.1. Version 1 - Prototype" title="Direct link to B.12.1.1. Version 1 - Prototype">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">(func $ext_panic_handler_abort_on_panic_version_1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (param $message i64))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Arguments</strong>  </p><ul><li><code>message</code>: a pointer-size (<a href="/chap-host-api#defn-runtime-pointer-size">Definition 216</a>) to the UTF-8 encoded message.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/w3f/polkadot-spec/blob/main/docs/chap-host-api.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/id-cryptography-encoding"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Appendix A: Cryptography &amp; Encoding</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/chap-runtime-api"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Appendix C: Runtime API</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#id-preliminaries-4" class="table-of-contents__link toc-highlight">B.1. Preliminaries</a></li><li><a href="#sect-storage-api" class="table-of-contents__link toc-highlight">B.2. Storage</a><ul><li><a href="#sect-storage-set" class="table-of-contents__link toc-highlight">B.2.1. <code>ext_storage_set</code></a></li><li><a href="#id-ext_storage_get" class="table-of-contents__link toc-highlight">B.2.2. <code>ext_storage_get</code></a></li><li><a href="#id-ext_storage_read" class="table-of-contents__link toc-highlight">B.2.3. <code>ext_storage_read</code></a></li><li><a href="#id-ext_storage_clear" class="table-of-contents__link toc-highlight">B.2.4. <code>ext_storage_clear</code></a></li><li><a href="#id-ext_storage_exists" class="table-of-contents__link toc-highlight">B.2.5. <code>ext_storage_exists</code></a></li><li><a href="#id-ext_storage_clear_prefix" class="table-of-contents__link toc-highlight">B.2.6. <code>ext_storage_clear_prefix</code></a></li><li><a href="#id-ext_storage_append" class="table-of-contents__link toc-highlight">B.2.7. <code>ext_storage_append</code></a></li><li><a href="#id-ext_storage_root" class="table-of-contents__link toc-highlight">B.2.8. <code>ext_storage_root</code></a></li><li><a href="#sect-ext-storage-changes-root" class="table-of-contents__link toc-highlight">B.2.9. <code>ext_storage_changes_root</code></a></li><li><a href="#id-ext_storage_next_key" class="table-of-contents__link toc-highlight">B.2.10. <code>ext_storage_next_key</code></a></li><li><a href="#sect-ext-storage-start-transaction" class="table-of-contents__link toc-highlight">B.2.11. <code>ext_storage_start_transaction</code></a></li><li><a href="#sect-ext-storage-rollback-transaction" class="table-of-contents__link toc-highlight">B.2.12. <code>ext_storage_rollback_transaction</code></a></li><li><a href="#sect-ext-storage-commit-transaction" class="table-of-contents__link toc-highlight">B.2.13. <code>ext_storage_commit_transaction</code></a></li></ul></li><li><a href="#sect-child-storage-api" class="table-of-contents__link toc-highlight">B.3. Child Storage</a><ul><li><a href="#id-ext_default_child_storage_set" class="table-of-contents__link toc-highlight">B.3.1. <code>ext_default_child_storage_set</code></a></li><li><a href="#id-ext_default_child_storage_get" class="table-of-contents__link toc-highlight">B.3.2. <code>ext_default_child_storage_get</code></a></li><li><a href="#id-ext_default_child_storage_read" class="table-of-contents__link toc-highlight">B.3.3. <code>ext_default_child_storage_read</code></a></li><li><a href="#id-ext_default_child_storage_clear" class="table-of-contents__link toc-highlight">B.3.4. <code>ext_default_child_storage_clear</code></a></li><li><a href="#id-ext_default_child_storage_storage_kill" class="table-of-contents__link toc-highlight">B.3.5. <code>ext_default_child_storage_storage_kill</code></a></li><li><a href="#id-ext_default_child_storage_exists" class="table-of-contents__link toc-highlight">B.3.6. <code>ext_default_child_storage_exists</code></a></li><li><a href="#id-ext_default_child_storage_clear_prefix" class="table-of-contents__link toc-highlight">B.3.7. <code>ext_default_child_storage_clear_prefix</code></a></li><li><a href="#id-ext_default_child_storage_root" class="table-of-contents__link toc-highlight">B.3.8. <code>ext_default_child_storage_root</code></a></li><li><a href="#id-ext_default_child_storage_next_key" class="table-of-contents__link toc-highlight">B.3.9. <code>ext_default_child_storage_next_key</code></a></li></ul></li><li><a href="#sect-crypto-api" class="table-of-contents__link toc-highlight">B.4. Crypto</a><ul><li><a href="#id-ext_crypto_ed25519_public_keys" class="table-of-contents__link toc-highlight">B.4.1. <code>ext_crypto_ed25519_public_keys</code></a></li><li><a href="#id-ext_crypto_ed25519_generate" class="table-of-contents__link toc-highlight">B.4.2. <code>ext_crypto_ed25519_generate</code></a></li><li><a href="#id-ext_crypto_ed25519_sign" class="table-of-contents__link toc-highlight">B.4.3. <code>ext_crypto_ed25519_sign</code></a></li><li><a href="#sect-ext-crypto-ed25519-verify" class="table-of-contents__link toc-highlight">B.4.4. <code>ext_crypto_ed25519_verify</code></a></li><li><a href="#sect-ext-crypto-ed25519-batch-verify" class="table-of-contents__link toc-highlight">B.4.5. <code>ext_crypto_ed25519_batch_verify</code></a></li><li><a href="#id-ext_crypto_sr25519_public_keys" class="table-of-contents__link toc-highlight">B.4.6. <code>ext_crypto_sr25519_public_keys</code></a></li><li><a href="#id-ext_crypto_sr25519_generate" class="table-of-contents__link toc-highlight">B.4.7. <code>ext_crypto_sr25519_generate</code></a></li><li><a href="#id-ext_crypto_sr25519_sign" class="table-of-contents__link toc-highlight">B.4.8. <code>ext_crypto_sr25519_sign</code></a></li><li><a href="#sect-ext-crypto-sr25519-verify" class="table-of-contents__link toc-highlight">B.4.9. <code>ext_crypto_sr25519_verify</code></a></li><li><a href="#sect-ext-crypto-sr25519-batch-verify" class="table-of-contents__link toc-highlight">B.4.10. <code>ext_crypto_sr25519_batch_verify</code></a></li><li><a href="#id-ext_crypto_ecdsa_public_keys" class="table-of-contents__link toc-highlight">B.4.11. <code>ext_crypto_ecdsa_public_keys</code></a></li><li><a href="#id-ext_crypto_ecdsa_generate" class="table-of-contents__link toc-highlight">B.4.12. <code>ext_crypto_ecdsa_generate</code></a></li><li><a href="#id-ext_crypto_ecdsa_sign" class="table-of-contents__link toc-highlight">B.4.13. <code>ext_crypto_ecdsa_sign</code></a></li><li><a href="#id-ext_crypto_ecdsa_sign_prehashed" class="table-of-contents__link toc-highlight">B.4.14. <code>ext_crypto_ecdsa_sign_prehashed</code></a></li><li><a href="#sect-ext-crypto-ecdsa-verify" class="table-of-contents__link toc-highlight">B.4.15. <code>ext_crypto_ecdsa_verify</code></a></li><li><a href="#id-ext_crypto_ecdsa_verify_prehashed" class="table-of-contents__link toc-highlight">B.4.16. <code>ext_crypto_ecdsa_verify_prehashed</code></a></li><li><a href="#sect-ext-crypto-ecdsa-batch-verify" class="table-of-contents__link toc-highlight">B.4.17. <code>ext_crypto_ecdsa_batch_verify</code></a></li><li><a href="#id-ext_crypto_secp256k1_ecdsa_recover" class="table-of-contents__link toc-highlight">B.4.18. <code>ext_crypto_secp256k1_ecdsa_recover</code></a></li><li><a href="#id-ext_crypto_secp256k1_ecdsa_recover_compressed" class="table-of-contents__link toc-highlight">B.4.19. <code>ext_crypto_secp256k1_ecdsa_recover_compressed</code></a></li><li><a href="#sect-ext-crypto-start-batch-verify" class="table-of-contents__link toc-highlight">B.4.20. <code>ext_crypto_start_batch_verify</code></a></li><li><a href="#sect-ext-crypto-finish-batch-verify" class="table-of-contents__link toc-highlight">B.4.21. <code>ext_crypto_finish_batch_verify</code></a></li></ul></li><li><a href="#sect-hashing-api" class="table-of-contents__link toc-highlight">B.5. Hashing</a><ul><li><a href="#id-ext_hashing_keccak_256" class="table-of-contents__link toc-highlight">B.5.1. <code>ext_hashing_keccak_256</code></a></li><li><a href="#id-ext_hashing_keccak_512" class="table-of-contents__link toc-highlight">B.5.2. <code>ext_hashing_keccak_512</code></a></li><li><a href="#id-ext_hashing_sha2_256" class="table-of-contents__link toc-highlight">B.5.3. <code>ext_hashing_sha2_256</code></a></li><li><a href="#id-ext_hashing_blake2_128" class="table-of-contents__link toc-highlight">B.5.4. <code>ext_hashing_blake2_128</code></a></li><li><a href="#id-ext_hashing_blake2_256" class="table-of-contents__link toc-highlight">B.5.5. <code>ext_hashing_blake2_256</code></a></li><li><a href="#id-ext_hashing_twox_64" class="table-of-contents__link toc-highlight">B.5.6. <code>ext_hashing_twox_64</code></a></li><li><a href="#id-ext_hashing_twox_128" class="table-of-contents__link toc-highlight">B.5.7. <code>ext_hashing_twox_128</code></a></li><li><a href="#id-ext_hashing_twox_256" class="table-of-contents__link toc-highlight">B.5.8. <code>ext_hashing_twox_256</code></a></li></ul></li><li><a href="#sect-offchain-api" class="table-of-contents__link toc-highlight">B.6. Offchain</a><ul><li><a href="#id-ext_offchain_is_validator" class="table-of-contents__link toc-highlight">B.6.1. <code>ext_offchain_is_validator</code></a></li><li><a href="#sect-ext-offchain-submit-transaction" class="table-of-contents__link toc-highlight">B.6.2. <code>ext_offchain_submit_transaction</code></a></li><li><a href="#id-ext_offchain_network_state" class="table-of-contents__link toc-highlight">B.6.3. <code>ext_offchain_network_state</code></a></li><li><a href="#id-ext_offchain_timestamp" class="table-of-contents__link toc-highlight">B.6.4. <code>ext_offchain_timestamp</code></a></li><li><a href="#id-ext_offchain_sleep_until" class="table-of-contents__link toc-highlight">B.6.5. <code>ext_offchain_sleep_until</code></a></li><li><a href="#id-ext_offchain_random_seed" class="table-of-contents__link toc-highlight">B.6.6. <code>ext_offchain_random_seed</code></a></li><li><a href="#id-ext_offchain_local_storage_set" class="table-of-contents__link toc-highlight">B.6.7. <code>ext_offchain_local_storage_set</code></a></li><li><a href="#id-ext_offchain_local_storage_clear" class="table-of-contents__link toc-highlight">B.6.8. <code>ext_offchain_local_storage_clear</code></a></li><li><a href="#id-ext_offchain_local_storage_compare_and_set" class="table-of-contents__link toc-highlight">B.6.9. <code>ext_offchain_local_storage_compare_and_set</code></a></li><li><a href="#id-ext_offchain_local_storage_get" class="table-of-contents__link toc-highlight">B.6.10. <code>ext_offchain_local_storage_get</code></a></li><li><a href="#id-ext_offchain_http_request_start" class="table-of-contents__link toc-highlight">B.6.11. <code>ext_offchain_http_request_start</code></a></li><li><a href="#id-ext_offchain_http_request_add_header" class="table-of-contents__link toc-highlight">B.6.12. <code>ext_offchain_http_request_add_header</code></a></li><li><a href="#id-ext_offchain_http_request_write_body" class="table-of-contents__link toc-highlight">B.6.13. <code>ext_offchain_http_request_write_body</code></a></li><li><a href="#id-ext_offchain_http_response_wait" class="table-of-contents__link toc-highlight">B.6.14. <code>ext_offchain_http_response_wait</code></a></li><li><a href="#id-ext_offchain_http_response_headers" class="table-of-contents__link toc-highlight">B.6.15. <code>ext_offchain_http_response_headers</code></a></li><li><a href="#id-ext_offchain_http_response_read_body" class="table-of-contents__link toc-highlight">B.6.16. <code>ext_offchain_http_response_read_body</code></a></li></ul></li><li><a href="#sect-offchainindex-api" class="table-of-contents__link toc-highlight">B.7. Offchain Index</a><ul><li><a href="#id-offchain_index_set" class="table-of-contents__link toc-highlight">B.7.1. <code>Offchain_index_set</code></a></li><li><a href="#id-offchain_index_clear" class="table-of-contents__link toc-highlight">B.7.2. <code>Offchain_index_clear</code></a></li></ul></li><li><a href="#sect-trie-api" class="table-of-contents__link toc-highlight">B.8. Trie</a><ul><li><a href="#id-ext_trie_blake2_256_root" class="table-of-contents__link toc-highlight">B.8.1. <code>ext_trie_blake2_256_root</code></a></li><li><a href="#id-ext_trie_blake2_256_ordered_root" class="table-of-contents__link toc-highlight">B.8.2. <code>ext_trie_blake2_256_ordered_root</code></a></li><li><a href="#id-ext_trie_keccak_256_root" class="table-of-contents__link toc-highlight">B.8.3. <code>ext_trie_keccak_256_root</code></a></li><li><a href="#id-ext_trie_keccak_256_ordered_root" class="table-of-contents__link toc-highlight">B.8.4. <code>ext_trie_keccak_256_ordered_root</code></a></li><li><a href="#id-ext_trie_blake2_256_verify_proof" class="table-of-contents__link toc-highlight">B.8.5. <code>ext_trie_blake2_256_verify_proof</code></a></li><li><a href="#id-ext_trie_keccak_256_verify_proof" class="table-of-contents__link toc-highlight">B.8.6. <code>ext_trie_keccak_256_verify_proof</code></a></li></ul></li><li><a href="#sect-misc-api" class="table-of-contents__link toc-highlight">B.9. Miscellaneous</a><ul><li><a href="#id-ext_misc_print_num" class="table-of-contents__link toc-highlight">B.9.1. <code>ext_misc_print_num</code></a></li><li><a href="#id-ext_misc_print_utf8" class="table-of-contents__link toc-highlight">B.9.2. <code>ext_misc_print_utf8</code></a></li><li><a href="#id-ext_misc_print_hex" class="table-of-contents__link toc-highlight">B.9.3. <code>ext_misc_print_hex</code></a></li><li><a href="#id-ext_misc_runtime_version" class="table-of-contents__link toc-highlight">B.9.4. <code>ext_misc_runtime_version</code></a></li></ul></li><li><a href="#sect-allocator-api" class="table-of-contents__link toc-highlight">B.10. Allocator</a><ul><li><a href="#id-ext_allocator_malloc" class="table-of-contents__link toc-highlight">B.10.1. <code>ext_allocator_malloc</code></a></li><li><a href="#id-ext_allocator_free" class="table-of-contents__link toc-highlight">B.10.2. <code>ext_allocator_free</code></a></li></ul></li><li><a href="#sect-logging-api" class="table-of-contents__link toc-highlight">B.11. Logging</a><ul><li><a href="#id-ext_logging_log" class="table-of-contents__link toc-highlight">B.11.1. <code>ext_logging_log</code></a></li><li><a href="#id-ext_logging_max_level" class="table-of-contents__link toc-highlight">B.11.2. <code>ext_logging_max_level</code></a></li></ul></li><li><a href="#id-abort-handler" class="table-of-contents__link toc-highlight">B.12. Abort Handler</a><ul><li><a href="#id-ext_panic_handler_abort_on_panic" class="table-of-contents__link toc-highlight">B.12.1. <code>ext_panic_handler_abort_on_panic</code></a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More Info</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/w3f/polkadot-spec" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/Support Docs/privacy_policy">Privacy Policy</a></li><li class="footer__item"><a href="https://web3.foundation/legal-disclosures/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legal Disclosures</a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Web3 Foundation</div></div></div></footer></div>
<script>!function(){var t,n;t=history.pushState,n=history.replaceState,history.pushState=function(){t.apply(history,arguments),window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange"))},history.replaceState=function(){n.apply(history,arguments),window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange"))},window.addEventListener("popstate",(function(){window.dispatchEvent(new Event("locationchange"))}))}()</script>
<script>!function(n,i){var t="",a="",e=function(){(a=window.location.href.split("#")[0])!==t&&(t=a,setTimeout(n,500))};window.addEventListener("load",e),window.addEventListener("locationchange",e)}((function(){document.querySelectorAll("svg.graphviz").forEach((function(n){if(!n.classList.contains("fixed")){var i=n.firstElementChild.querySelector("path");i&&i.remove();var t=Array.from(n.children).reduce((function(n,i){var t=i.getBBox(),a=t.x,e=t.y,o=t.width,c=t.height;return(!n.xMin||a<n.xMin)&&(n.xMin=a),(!n.xMax||a+o>n.xMax)&&(n.xMax=a+o),(!n.yMin||e<n.yMin)&&(n.yMin=e),(!n.yMax||e+c>n.yMax)&&(n.yMax=e+c),n}),{xMin:0,xMax:0,yMin:0,yMax:0}),a=t.xMin,e=t.xMax,o=t.yMin,c=t.yMax,x="".concat(a," ").concat(o," ").concat(e-a," ").concat(c-o);n.setAttribute("viewBox",x),n.classList.add("fixed")}}))}))</script>
<script>!function(n,e){var t="",a="",i=function(){(a=window.location.href.split("#")[0])!==t&&(t=a,setTimeout(n,500))};window.addEventListener("load",i),window.addEventListener("locationchange",i)}((function(){for(var n=document.getElementsByClassName("csl-right-inline"),e=0;e<n.length;e++){var t=n[e],a=t.innerHTML;a=a.replace(/(?<!href="|<a href=")(https?:\/\/[^\s]+)(?<!:)/g,'<a href="$1" target="_blank">$1</a>'),t.innerHTML=a}}))</script>
<script>!function(e,n){var a="",i="",o=function(){(i=window.location.href.split("#")[0])!==a&&(a=i,setTimeout(e,500))};window.addEventListener("load",o),window.addEventListener("locationchange",o)}((function(){var e,n=null===(e=document.getElementsByClassName("theme-doc-markdown markdown")[0])||void 0===e?void 0:e.children;if(n&&"H1"===n[0].children[0].tagName&&n[0].children[0].innerHTML.toLowerCase().includes("glossary"))for(var a=0;a<n.length;a++)"P"===n[a].tagName&&n[a].classList.add("glossary-term"),"UL"===n[a].tagName&&n[a].classList.add("glossary-definition")}))</script>
<script>!function(n,e){var t="",o="",i=function(){(o=window.location.href.split("#")[0])!==t&&(t=o,setTimeout(n,500))};window.addEventListener("load",i),window.addEventListener("locationchange",i)}((function(){for(var n=document.getElementsByClassName("ps-keyword"),e=0;e<n.length;e++){var t=n[e],o=t.innerHTML;o=o.replace(/(\d+)/g,""),t.innerHTML=o}}))</script>

<script>!function(){var t="https://spec.polkadot.network/";fetch("/entitiesMap.json").then((function(n){return n.text().then((function(n){var o=JSON.parse(n),c=window.location.href;if(c.startsWith("".concat(t,"#"))){var a=c.split("#")[1],e=o[a];e&&window.location.replace("".concat(t).concat(e,"#").concat(a))}}))}))}()</script>
<script>!function(e,n){var a="",t="",i=function(){(t=window.location.href.split("#")[0])!==a&&(a=t,setTimeout(e,0))};window.addEventListener("load",i),window.addEventListener("locationchange",i)}((function(){var e=document.getElementsByClassName("breadcrumbs")[0];if(e){var n=e.children[1].children[0],a=("A"===n.tagName?n.children[0]:n).innerHTML,t=document.getElementsByClassName("navbar__items--right")[0].querySelectorAll('a[aria-current="page"]'),i="navbar__link--active";t.forEach((function(e){e.innerHTML!=a?e.classList.remove(i):e.classList.contains(i)||e.classList.add(i)}))}}))</script></body>
</html>