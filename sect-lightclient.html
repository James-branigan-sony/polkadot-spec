<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-sect-lightclient">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v0.0.0-5547">
<title data-rh="true">7. Light Clients | Polkadot Protocol Specification</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://spec.polkadot.network/sect-lightclient"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="7. Light Clients | Polkadot Protocol Specification"><meta data-rh="true" name="description" content="7.1. Requirements for Light Clients"><meta data-rh="true" property="og:description" content="7.1. Requirements for Light Clients"><link data-rh="true" rel="icon" href="/img/polkadot-logo.png"><link data-rh="true" rel="canonical" href="https://spec.polkadot.network/sect-lightclient"><link data-rh="true" rel="alternate" href="https://spec.polkadot.network/sect-lightclient" hreflang="en"><link data-rh="true" rel="alternate" href="https://spec.polkadot.network/sect-lightclient" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://59CYO0AR6V-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css"><link rel="stylesheet" href="/assets/css/styles.e5183a90.css">
<script src="/assets/js/runtime~main.6f1f5099.js" defer="defer"></script>
<script src="/assets/js/main.b77e0a44.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/Polkadot_Logo_Horizontal_Pink-Black.svg" alt="Polkadot Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/Polkadot_Logo_Horizontal_Pink-Black.svg" alt="Polkadot Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/part-polkadot-host">Host</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/part-polkadot-runtime">Runtime</a><a href="https://github.com/w3f/polkadot-spec" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/id-polkadot-protocol">Protocol</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/part-polkadot-host">Host</a><button aria-label="Toggle the collapsible sidebar category &#x27;Host&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chap-overview">1. Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chap-state">2. States and Transitions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chap-sync">3. Synchronization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chap-networking">4. Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sect-block-production">5. Block Production</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sect-finality">6. Finality</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sect-lightclient">7. Light Clients</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/chapter-anv">8. Availability &amp; Validity</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/part-polkadot-runtime">Runtime</a><button aria-label="Toggle the collapsible sidebar category &#x27;Runtime&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/id-extrinsics">9. Extrinsics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/id-weights">10. Weights</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/id-consensus">11. Consensus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sect-metadata">12. Metadata</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/Implementation Guide">Implementation Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Implementation Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Implementation Guide/faq">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/id-cryptography-encoding">Appendix A: Cryptography &amp; Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chap-host-api">Appendix B: Host API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/chap-runtime-api">Appendix C: Runtime API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/id-glossary">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/part-polkadot-host"><span itemprop="name">Host</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">7. Light Clients</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>7. Light Clients</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-requirements-lightclient">7.1. Requirements for Light Clients<a href="#sect-requirements-lightclient" class="hash-link" aria-label="Direct link to 7.1. Requirements for Light Clients" title="Direct link to 7.1. Requirements for Light Clients">​</a></h2><p>We list the requirements of a Light Client categorized along the three dimensions of Functionality, Efficiency, and Security.</p><ul><li><p><strong>Functional Requirements:</strong></p><ol><li><p>Synchronize with full nodes to obtain the latest finalized Block Header <a href="/chap-state#defn-block-header">Definition 10</a>, and in turn, the state trie root.</p></li><li><p>(Optional) Verify validity of runtime transitions (<a href="/chap-state#sect-runtime-interaction">Section 2.6.</a>).</p></li><li><p>Make queries for data at the latest block height or across a range of blocks.</p></li><li><p>Append extrinsics (<a href="/chap-state#sect-extrinsics">Section 2.3.</a>) to the blockchain via full nodes.</p></li></ol></li><li><p><strong>Efficiency Requirements:</strong></p><ol><li><p>Efficient bootstrapping and syncing: initializations and update functions of the state have tractable computation and communication complexity and grows at most linearly with the chain size. Generally, the complexity is proportional to the GRANDPA validator set change.</p></li><li><p>Querying operations happen by requesting the key-value pair from a full node.</p></li><li><p>Further, verifying the validity of responses by the full node is logarithmic in the size of the state.</p></li></ol></li><li><p><strong>Security Requirements:</strong></p><ol><li><p>Secure bootstrapping and Synchronizing: The probability that an adversarial full node convinces a light client of a forged blockchain state is negligible.</p></li><li><p>Secure querying: The probability that an adversary convinces a light client to accept a forged account state is negligible.</p></li><li><p>Assure that the submitted extrinsics are appended in a successor block or inform the user in case of failure.</p></li></ol></li><li><p><strong>Polkadot Specific Requirements:</strong></p><ol><li><p>The client MUST be able to connect to a relay chain using chain state.</p></li><li><p>The client MUST be able to retrieve the checkpoint state from a trusted source to speed up initialization.</p></li><li><p>The client MUST be able to subscribe/unsubscribe to/from any polkadot-spec-conformant relay chain (Polkadot, Westend, Kusama)</p></li><li><p>The client MUST be able to subscribe/unsubscribe to/from parachains that do not use custom protocols or cryptography methods other than those that Polkadot, Westend and Kusama use.</p></li><li><p>The client MUST support the following <a href="https://github.com/paritytech/json-rpc-interface-spec" target="_blank" rel="noopener noreferrer">RPC methods</a>: <code>rpc_methods</code>, <code>chainHead_unstable_follow</code>, <code>chainHead_unstable_unfollow</code>, <code>chainHead_unstable_unpin</code>, <code>chainHead_unstable_storage</code>, <code>chainHead_unstable_call</code> <code>chainHead_unstable_stopCall</code>. <code>transaction_unstable_submitAndWatch</code>, and <code>transaction_unstable_unwatch</code></p></li><li><p>The client MUST support the @substrate/connect <a href="https://github.com/paritytech/substrate-connect/tree/main/packages/connect-extension-protocol" target="_blank" rel="noopener noreferrer">connection extension protocol</a>: <code>ToApplicationError</code>, <code>ToApplicationChainReady</code>, <code>ToApplicationRpc</code>, <code>ToExtensionAddChain</code>, <code>ToExtensionAddWellKnownChain</code>, <code>ToExtensionRpc</code>, <code>ToExtensionRemoveChain</code>.</p></li></ol></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-sync-warp-lightclient">7.2. Warp Sync for Light Clients<a href="#sect-sync-warp-lightclient" class="hash-link" aria-label="Direct link to 7.2. Warp Sync for Light Clients" title="Direct link to 7.2. Warp Sync for Light Clients">​</a></h2><p>Warp sync (<a href="/chap-networking#sect-msg-warp-sync">Section 4.8.5.</a>) only downloads the block headers where authority set changes occurred, so-called fragments (<a href="/chap-networking#defn-warp-sync-proof">Definition 46</a>), and by verifying the GRANDPA justifications (<a href="/sect-finality#defn-grandpa-justification">Definition 83</a>). This protocol allows nodes to arrive at the desired state much faster than fast sync. Warp sync is primarily designed for Light Clients. Although, warp sync could be used by full nodes, the sync process may lack information to cater to complete functionality set of full nodes.</p><p>For light clients, it is too expensive to download the state (approx. 550MB) to respond to queries. Rather, the queries are submitted to the Full node, and only the response of the full node is validated using the hash of the state root. Requests for warp sync are performed using the <code>/dot/sync/warp</code> <em>Request-Response</em> substream, the corresponding network messages are detailed in <a href="/chap-networking#sect-protocols-substreams">Section 4.7.</a>.</p><p>Light clients base their trust in provided snapshots and the ability to slash grandpa votes for equivocation for the period they are syncing via warp sync. Full nodes and above, in contrast, verify each block individually.</p><p>In theory, the <code>warp sync</code> process takes the Genesis Block as input and outputs the hash of the state trie root at the latest finalized block. This root hash acts as proof to further validate the responses to queries by the full node. The <code>warp sync</code> works by starting from a trusted specified block (e.g., from a snapshot) and verifying the block headers only at the authority set changes.</p><p>Eventually, the light client verifies the finality of the block returned by a full node to ensure that the block is indeed the latest finalized block. This entails two things:</p><ol><li><p>Check the authenticity of GRANDPA Justifications messages from Genesis to the last finalized block.</p></li><li><p>Check the timestamp of the last finalized block to ensure that no other blocks might have been finalized at a later timestamp.</p></li></ol><div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p><strong>Long-Range Attack Vulnerabilities</strong>: Warp syncing is particularly vulnerable to what is called long-range attacks. The authorities allowed to finalize blocks can generate multiple proofs of finality for multiple different blocks of the same height. Hence, they can finalize more than one chain at a time. It is possible for two-thirds of the validators that were active at a certain past block N to collude and decide to finalize a different block N&#x27;, even when N has been finalized for the first time several weeks or months in the past. When a client then warp syncs, it can be tricked to consider this alternative block N&#x27; as the finalized one. However, in practice, to mitigate Long-Range Attacks, the starting point of the warp syncing is not too far in the past. How far exactly depends on the logic of the runtime of the chain. For example, in Polkadot, the starting block for the sync should be at max 28 days old to be within the purview of the slashing period for misbehaving nodes. Hence, even though, in theory, warp sync can start from Genesis Block, it is not advised to implement the same in practice.</p></div></div><p>We outline the warp sync process, abstracting out details of verifying the finality and how the full node to sync with is selected.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="algo-warp-sync">Algorithm 23. Warp Sync Light Clients<a href="#algo-warp-sync" class="hash-link" aria-label="Direct link to Algorithm 23. Warp Sync Light Clients" title="Direct link to Algorithm 23. Warp Sync Light Clients">​</a></h6><div class="alert alert--algorithm"><h5></h5><div><div><pre id="_ps_warpSyncLightClients" class="pseudocode" style="display: hidden">\begin{algorithm}
\caption{Warp-Sync-Light-Clients}
\begin{algorithmic}
    \INPUT BlockHeader startblock, the initial block to start the sync. May not be the Genesis Block. 
    \OUTPUT CommitmentRootHash $root$, State Tries Root hash of the latest finalized Block. 
    \STATE \textsc{fullnode} $\leftarrow$ SelectFullNode  
    \STATE \textsc{latestBlockHeader, grandpaJustifications} $\leftarrow$ SyncWithNode(\textsc{fullnode})
    \STATE \textsc{isVerified} $\leftarrow$ verifyAuthoritySetChange(\textsc{grandpaJustifications}) $\land$ verifyFinality(\textsc{latestBlockHeader})
    \IF{\textsc{isVerified}}
        \STATE $return$ $SOME$ getCommitmentRootHash(\textsc{latestBlockHeader})
    \ENDIF
    \STATE {$throw$ $ERROR$}
\end{algorithmic}
\end{algorithm}</pre></div><p>Abstraction of Warp Sync and verification of the latest block’s finality.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>e</mi><mi>l</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>F</mi><mi>u</mi><mi>l</mi><mi>l</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">{SelectFullNode}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">ec</span><span class="mord mathnormal" style="margin-right:0.13889em">tF</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.10903em">llN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span></span>: Determines the full node that the light client syncs with.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi>y</mi><mi>n</mi><mi>c</mi><mi>S</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">{SyncSithNode}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal">n</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span></span>: Returns the header of the latest finalized block and a list of Grandpa Justifications by the full node.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>f</mi><mi>y</mi><mi>A</mi><mi>u</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>r</mi><mi>i</mi><mi>t</mi><mi>y</mi><mi>S</mi><mi>e</mi><mi>t</mi><mi>C</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">{verifyAuthoritySetChange}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mord mathnormal" style="margin-right:0.02778em">er</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal">A</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal" style="margin-right:0.02778em">or</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="mord mathnormal">e</span><span class="mord mathnormal" style="margin-right:0.07153em">tC</span><span class="mord mathnormal">han</span><span class="mord mathnormal" style="margin-right:0.03588em">g</span><span class="mord mathnormal">e</span></span></span></span></span></span>: Verification algorithm which checks the authenticity of the header only at the end of an era where the authority set changes iteratively until reaching the latest era.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>f</mi><mi>y</mi><mi>F</mi><mi>i</mi><mi>n</mi><mi>a</mi><mi>l</mi><mi>t</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">{verifyFinalty}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mord mathnormal" style="margin-right:0.02778em">er</span><span class="mord mathnormal">i</span><span class="mord mathnormal" style="margin-right:0.10764em">f</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="mord mathnormal">ina</span><span class="mord mathnormal">lt</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span></span></span></span></span></span>: Verifies the finality of the latest block using the Grandpa Justifications messages.</p></div></div><p>The warp syncing process is closely coupled with the state querying procedure used by the light client. We outline the process of querying the state by a light client and validating the response.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="algo-light-clients-query-state">Algorithm 24. Querying State Light Clients<a href="#algo-light-clients-query-state" class="hash-link" aria-label="Direct link to Algorithm 24. Querying State Light Clients" title="Direct link to Algorithm 24. Querying State Light Clients">​</a></h6><div class="alert alert--algorithm"><h5></h5><div><div><pre id="_ps_queryingStateLightClients" class="pseudocode" style="display: hidden">\begin{algorithm}
\caption{Querying-State-Light-Clients}
\begin{algorithmic}
    \INPUT Query q, BlockHeight h, CommitmentRootHash $root$
    \OUTPUT Maybe Result $res$
    \STATE ($res$, $\pi$) $\leftarrow QueryFullNode (q, h)$
    \IF{$validityCheck_{root}(res, \pi)$}
        \STATE $return$ $SOME$ $res$
    \ENDIF
    \STATE {$throw$ $ERROR$}
\end{algorithmic}
\end{algorithm}</pre></div><p>Querying State Algorithm.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mi>u</mi><mi>e</mi><mi>r</mi><mi>y</mi><mi>F</mi><mi>u</mi><mi>l</mi><mi>l</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">{QueryFullNode}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.03588em">ery</span><span class="mord mathnormal" style="margin-right:0.13889em">F</span><span class="mord mathnormal">u</span><span class="mord mathnormal" style="margin-right:0.10903em">llN</span><span class="mord mathnormal">o</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span></span></span></span></span></span>: Returns the response to the query requested from the Full Node for the query <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">{q}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">q</span></span></span></span></span></span> at block height <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">{h}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord"><span class="mord mathnormal">h</span></span></span></span></span></span>.</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi>v</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>d</mi><mi>i</mi><mi>t</mi><mi>y</mi><mi>C</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>k</mi></mrow><mrow><mi>r</mi><mi>o</mi><mi>o</mi><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">{validityCheck}_{root}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9386em;vertical-align:-0.2441em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em">l</span><span class="mord mathnormal">i</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.03588em">y</span><span class="mord mathnormal" style="margin-right:0.07153em">C</span><span class="mord mathnormal">h</span><span class="mord mathnormal">ec</span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1864em"><span style="top:-2.4559em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">roo</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em"><span></span></span></span></span></span></span></span></span></span></span>: Predicate that checks the validity of response <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">{res}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord"><span class="mord mathnormal">res</span></span></span></span></span></span> and associated merkle proof <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal" style="margin-right:0.03588em">π</span></span></span></span></span> by matching it against the Commit Root Hash <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>o</mi><mi>o</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">{root}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord"><span class="mord mathnormal">roo</span><span class="mord mathnormal">t</span></span></span></span></span></span> obtained as a result of warp sync.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-runtime-environment-lightclient">7.3. Runtime Environment for Light Clients<a href="#sect-runtime-environment-lightclient" class="hash-link" aria-label="Direct link to 7.3. Runtime Environment for Light Clients" title="Direct link to 7.3. Runtime Environment for Light Clients">​</a></h2><p>Technically, though a runtime execution environment is not necessary to build a light client, most clients require interacting with the Runtime and the state of the blockchain for integrity checks at the minimum. One can imagine an application scenario like an on-chain light client which only listens to the latest state without ever adding extrinsics. Current implementations of Light Nodes (for e.g., Smoldot) use the wasmtime as its runtime environment to drastically simplify the code. The performance of wasmtime is satisfying enough not to require a native runtime. The details of the runtime API that the environment needs to support can be found in (<a href="/chap-runtime-api">Appendix C</a>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-light-msg">7.4. Light Client Messages<a href="#sect-light-msg" class="hash-link" aria-label="Direct link to 7.4. Light Client Messages" title="Direct link to 7.4. Light Client Messages">​</a></h2><p>Light clients are applications that fetch the required data that they need from a Polkadot node with an associated proof to validate the data. This makes it possible to interact with the Polkadot network without requiring to run a full node or having to trust the remote peers. The light client messages make this functionality possible.</p><p>All light client messages are protobuf encoded and are sent over the <code>/dot/light/2</code> substream.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-request">7.4.1. Request<a href="#id-request" class="hash-link" aria-label="Direct link to 7.4.1. Request" title="Direct link to 7.4.1. Request">​</a></h3><p>A message with all possible request messages. All messages are sent as part of this message.</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>oneof</code> (<code>request</code>)</td><td></td><td>The request type</td></tr></tbody></table><p>Where the <code>request</code> can be one of the following fields:</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>RemoteCallRequest</code></td><td>1</td><td>A remote call request (<a href="/sect-lightclient#sect-light-remote-call-request">Definition 106</a>)</td></tr><tr><td><code>RemoteReadRequest</code></td><td>2</td><td>A remote read request (<a href="/sect-lightclient#sect-light-remote-read-request">Definition 108</a>)</td></tr><tr><td><code>RemoteReadChildRequest</code></td><td>4</td><td>A remote read child request (<a href="/sect-lightclient#sect-light-remote-read-child-request">Definition 110</a>)</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-response">7.4.2. Response<a href="#id-response" class="hash-link" aria-label="Direct link to 7.4.2. Response" title="Direct link to 7.4.2. Response">​</a></h3><p>A message with all possible response messages. All messages are sent as part of this message.</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>oneof</code> (<code>response</code>)</td><td></td><td>The response type</td></tr></tbody></table><p>Where the <code>response</code> can be one of the following fields:</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>RemoteCallResponse</code></td><td>1</td><td>A remote call response (<a href="/sect-lightclient#sect-light-remote-call-response">Definition 107</a>)</td></tr><tr><td><code>RemoteReadResponse</code></td><td>2</td><td>A remote read response (<a href="/sect-lightclient#sect-light-remote-read-response">Definition 109</a>)</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-remote-call-messages">7.4.3. Remote Call Messages<a href="#id-remote-call-messages" class="hash-link" aria-label="Direct link to 7.4.3. Remote Call Messages" title="Direct link to 7.4.3. Remote Call Messages">​</a></h3><p>Execute a call to a contract at the given block.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="sect-light-remote-call-request">Definition 106. Remote Call Request<a href="#sect-light-remote-call-request" class="hash-link" aria-label="Direct link to Definition 106. Remote Call Request" title="Direct link to Definition 106. Remote Call Request">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>Remote call request.</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>bytes</code></td><td>2</td><td>Block at which to perform call</td></tr><tr><td><code>string</code></td><td>3</td><td>Method name</td></tr><tr><td><code>bytes</code></td><td>4</td><td>Call data</td></tr></tbody></table></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="sect-light-remote-call-response">Definition 107. Remote Call Response<a href="#sect-light-remote-call-response" class="hash-link" aria-label="Direct link to Definition 107. Remote Call Response" title="Direct link to Definition 107. Remote Call Response">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>Remote call response.</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>bytes</code></td><td>2</td><td>An <em>Option</em> type (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the call proof or <em>None</em> if proof generation failed.</td></tr></tbody></table></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-remote-read-messages">7.4.4. Remote Read Messages<a href="#id-remote-read-messages" class="hash-link" aria-label="Direct link to 7.4.4. Remote Read Messages" title="Direct link to 7.4.4. Remote Read Messages">​</a></h3><p>Read a storage value at the given block.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="sect-light-remote-read-request">Definition 108. Remote Read Request<a href="#sect-light-remote-read-request" class="hash-link" aria-label="Direct link to Definition 108. Remote Read Request" title="Direct link to Definition 108. Remote Read Request">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>Remote read request.</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>bytes</code></td><td>2</td><td>Block at which to perform call</td></tr><tr><td><code>repeated bytes</code></td><td>3</td><td>Storage keys</td></tr></tbody></table></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="sect-light-remote-read-response">Definition 109. Remote Read Response<a href="#sect-light-remote-read-response" class="hash-link" aria-label="Direct link to Definition 109. Remote Read Response" title="Direct link to Definition 109. Remote Read Response">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>Remote read response.</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>bytes</code></td><td>2</td><td>An <em>Option</em> type (<a href="/id-cryptography-encoding#defn-option-type">Definition 200</a>) containing the read proof or <em>None</em> if proof generation failed.</td></tr></tbody></table></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="id-remote-read-child-messages">7.4.5. Remote Read Child Messages<a href="#id-remote-read-child-messages" class="hash-link" aria-label="Direct link to 7.4.5. Remote Read Child Messages" title="Direct link to 7.4.5. Remote Read Child Messages">​</a></h3><p>Read a child storage value at the given block.</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="sect-light-remote-read-child-request">Definition 110. Remote Read Child Request<a href="#sect-light-remote-read-child-request" class="hash-link" aria-label="Direct link to Definition 110. Remote Read Child Request" title="Direct link to Definition 110. Remote Read Child Request">​</a></h6><div class="alert alert--definition"><h5></h5><div><p>Remote read child request.</p><table><thead><tr><th>Type</th><th>Id</th><th>Description</th></tr></thead><tbody><tr><td><code>bytes</code></td><td>2</td><td>Block at which to perform call</td></tr><tr><td><code>bytes</code></td><td>3</td><td>Child storage key, this is relative to the child type storage location</td></tr><tr><td><code>bytes</code></td><td>6</td><td>Storage keys</td></tr></tbody></table><p>The response is the same as for the <em>Remote Read Request</em> message, respectively <a href="/sect-lightclient#sect-light-remote-read-response">Definition 109</a>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sect-storage-lightclient">7.5. Storage for Light Clients<a href="#sect-storage-lightclient" class="hash-link" aria-label="Direct link to 7.5. Storage for Light Clients" title="Direct link to 7.5. Storage for Light Clients">​</a></h2><p>The light client requires a persistent storage for saving the state of the blockchain. In addition, it requires efficient Serialization/De-serialization methods to transform SCALE (<a href="/id-cryptography-encoding#sect-scale-codec">Section A.2.2.</a>) encoded network traffic for storing and reading from the persistent storage.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/w3f/polkadot-spec/blob/main/docs/sect-lightclient.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/sect-finality"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">6. Finality</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/chapter-anv"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">8. Availability &amp; Validity</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sect-requirements-lightclient" class="table-of-contents__link toc-highlight">7.1. Requirements for Light Clients</a></li><li><a href="#sect-sync-warp-lightclient" class="table-of-contents__link toc-highlight">7.2. Warp Sync for Light Clients</a></li><li><a href="#sect-runtime-environment-lightclient" class="table-of-contents__link toc-highlight">7.3. Runtime Environment for Light Clients</a></li><li><a href="#sect-light-msg" class="table-of-contents__link toc-highlight">7.4. Light Client Messages</a><ul><li><a href="#id-request" class="table-of-contents__link toc-highlight">7.4.1. Request</a></li><li><a href="#id-response" class="table-of-contents__link toc-highlight">7.4.2. Response</a></li><li><a href="#id-remote-call-messages" class="table-of-contents__link toc-highlight">7.4.3. Remote Call Messages</a></li><li><a href="#id-remote-read-messages" class="table-of-contents__link toc-highlight">7.4.4. Remote Read Messages</a></li><li><a href="#id-remote-read-child-messages" class="table-of-contents__link toc-highlight">7.4.5. Remote Read Child Messages</a></li></ul></li><li><a href="#sect-storage-lightclient" class="table-of-contents__link toc-highlight">7.5. Storage for Light Clients</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">More Info</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/w3f/polkadot-spec" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://web3.foundation/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/Support Docs/privacy_policy">Privacy Policy</a></li><li class="footer__item"><a href="https://web3.foundation/legal-disclosures/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Legal Disclosures</a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/Web3foundation" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2024 Web3 Foundation</div></div></div></footer></div>
<script>!function(){var t,n;t=history.pushState,n=history.replaceState,history.pushState=function(){t.apply(history,arguments),window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange"))},history.replaceState=function(){n.apply(history,arguments),window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange"))},window.addEventListener("popstate",(function(){window.dispatchEvent(new Event("locationchange"))}))}()</script>
<script>!function(n,i){var t="",a="",e=function(){(a=window.location.href.split("#")[0])!==t&&(t=a,setTimeout(n,500))};window.addEventListener("load",e),window.addEventListener("locationchange",e)}((function(){document.querySelectorAll("svg.graphviz").forEach((function(n){if(!n.classList.contains("fixed")){var i=n.firstElementChild.querySelector("path");i&&i.remove();var t=Array.from(n.children).reduce((function(n,i){var t=i.getBBox(),a=t.x,e=t.y,o=t.width,c=t.height;return(!n.xMin||a<n.xMin)&&(n.xMin=a),(!n.xMax||a+o>n.xMax)&&(n.xMax=a+o),(!n.yMin||e<n.yMin)&&(n.yMin=e),(!n.yMax||e+c>n.yMax)&&(n.yMax=e+c),n}),{xMin:0,xMax:0,yMin:0,yMax:0}),a=t.xMin,e=t.xMax,o=t.yMin,c=t.yMax,x="".concat(a," ").concat(o," ").concat(e-a," ").concat(c-o);n.setAttribute("viewBox",x),n.classList.add("fixed")}}))}))</script>
<script>!function(n,e){var t="",a="",i=function(){(a=window.location.href.split("#")[0])!==t&&(t=a,setTimeout(n,500))};window.addEventListener("load",i),window.addEventListener("locationchange",i)}((function(){for(var n=document.getElementsByClassName("csl-right-inline"),e=0;e<n.length;e++){var t=n[e],a=t.innerHTML;a=a.replace(/(?<!href="|<a href=")(https?:\/\/[^\s]+)(?<!:)/g,'<a href="$1" target="_blank">$1</a>'),t.innerHTML=a}}))</script>
<script>!function(e,n){var a="",i="",o=function(){(i=window.location.href.split("#")[0])!==a&&(a=i,setTimeout(e,500))};window.addEventListener("load",o),window.addEventListener("locationchange",o)}((function(){var e,n=null===(e=document.getElementsByClassName("theme-doc-markdown markdown")[0])||void 0===e?void 0:e.children;if(n&&"H1"===n[0].children[0].tagName&&n[0].children[0].innerHTML.toLowerCase().includes("glossary"))for(var a=0;a<n.length;a++)"P"===n[a].tagName&&n[a].classList.add("glossary-term"),"UL"===n[a].tagName&&n[a].classList.add("glossary-definition")}))</script>
<script>!function(n,e){var t="",o="",i=function(){(o=window.location.href.split("#")[0])!==t&&(t=o,setTimeout(n,500))};window.addEventListener("load",i),window.addEventListener("locationchange",i)}((function(){for(var n=document.getElementsByClassName("ps-keyword"),e=0;e<n.length;e++){var t=n[e],o=t.innerHTML;o=o.replace(/(\d+)/g,""),t.innerHTML=o}}))</script>

<script>!function(){var t="https://spec.polkadot.network/";fetch("/entitiesMap.json").then((function(n){return n.text().then((function(n){var o=JSON.parse(n),c=window.location.href;if(c.startsWith("".concat(t,"#"))){var a=c.split("#")[1],e=o[a];e&&window.location.replace("".concat(t).concat(e,"#").concat(a))}}))}))}()</script>
<script>!function(e,n){var a="",t="",i=function(){(t=window.location.href.split("#")[0])!==a&&(a=t,setTimeout(e,0))};window.addEventListener("load",i),window.addEventListener("locationchange",i)}((function(){var e=document.getElementsByClassName("breadcrumbs")[0];if(e){var n=e.children[1].children[0],a=("A"===n.tagName?n.children[0]:n).innerHTML,t=document.getElementsByClassName("navbar__items--right")[0].querySelectorAll('a[aria-current="page"]'),i="navbar__link--active";t.forEach((function(e){e.innerHTML!=a?e.classList.remove(i):e.classList.contains(i)||e.classList.add(i)}))}}))</script></body>
</html>